!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.PIXI=t()}}(function(){var t;return function e(t,r,i){function n(o,a){if(!r[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[o]={exports:{}};t[o][0].call(u.exports,function(e){var r=t[o][1][e];return n(r?r:e)},u,u.exports,e,t,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e){var r=e.exports=t("./core");r.extras=t("./extras"),r.filters=t("./filters"),r.interaction=t("./interaction"),r.loaders=t("./loaders"),r.spine=t("./spine"),r.text=t("./text")},{"./core":20,"./extras":73,"./filters":87,"./interaction":101,"./loaders":103,"./spine":110,"./text":113}],2:[function(e,r){(function(e){!function(){function i(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}var n,s,o={};n=this,null!=n&&(s=n.async),o.noConflict=function(){return n.async=s,o};var a=Object.prototype.toString,h=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=function(t,e){if(t.forEach)return t.forEach(e);for(var r=0;r<t.length;r+=1)e(t[r],r,t)},u=function(t,e){if(t.map)return t.map(e);var r=[];return l(t,function(t,i,n){r.push(e(t,i,n))}),r},c=function(t,e,r){return t.reduce?t.reduce(e,r):(l(t,function(t,i,n){r=e(r,t,i,n)}),r)},d=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e};"undefined"!=typeof e&&e.nextTick?(o.nextTick=e.nextTick,o.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(t){setImmediate(t)},o.setImmediate=o.nextTick):(o.nextTick=function(t){setTimeout(t,0)},o.setImmediate=o.nextTick),o.each=function(t,e,r){function n(e){e?(r(e),r=function(){}):(s+=1,s>=t.length&&r())}if(r=r||function(){},!t.length)return r();var s=0;l(t,function(t){e(t,i(n))})},o.forEach=o.each,o.eachSeries=function(t,e,r){if(r=r||function(){},!t.length)return r();var i=0,n=function(){e(t[i],function(e){e?(r(e),r=function(){}):(i+=1,i>=t.length?r():n())})};n()},o.forEachSeries=o.eachSeries,o.eachLimit=function(t,e,r,i){var n=p(e);n.apply(null,[t,r,i])},o.forEachLimit=o.eachLimit;var p=function(t){return function(e,r,i){if(i=i||function(){},!e.length||0>=t)return i();var n=0,s=0,o=0;!function a(){if(n>=e.length)return i();for(;t>o&&s<e.length;)s+=1,o+=1,r(e[s-1],function(t){t?(i(t),i=function(){}):(n+=1,o-=1,n>=e.length?i():a())})}()}},f=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.each].concat(e))}},g=function(t,e){return function(){var r=Array.prototype.slice.call(arguments);return e.apply(null,[p(t)].concat(r))}},v=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[o.eachSeries].concat(e))}},m=function(t,e,r,i){if(e=u(e,function(t,e){return{index:e,value:t}}),i){var n=[];t(e,function(t,e){r(t.value,function(r,i){n[t.index]=i,e(r)})},function(t){i(t,n)})}else t(e,function(t,e){r(t.value,function(t){e(t)})})};o.map=f(m),o.mapSeries=v(m),o.mapLimit=function(t,e,r,i){return y(e)(t,r,i)};var y=function(t){return g(t,m)};o.reduce=function(t,e,r,i){o.eachSeries(t,function(t,i){r(e,t,function(t,r){e=r,i(t)})},function(t){i(t,e)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(t,e,r,i){var n=u(t,function(t){return t}).reverse();o.reduce(n,e,r,i)},o.foldr=o.reduceRight;var x=function(t,e,r,i){var n=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r&&n.push(t),e()})},function(){i(u(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};o.filter=f(x),o.filterSeries=v(x),o.select=o.filter,o.selectSeries=o.filterSeries;var b=function(t,e,r,i){var n=[];e=u(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){r(t.value,function(r){r||n.push(t),e()})},function(){i(u(n.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};o.reject=f(b),o.rejectSeries=v(b);var T=function(t,e,r,i){t(e,function(t,e){r(t,function(r){r?(i(t),i=function(){}):e()})},function(){i()})};o.detect=f(T),o.detectSeries=v(T),o.some=function(t,e,r){o.each(t,function(t,i){e(t,function(t){t&&(r(!0),r=function(){}),i()})},function(){r(!1)})},o.any=o.some,o.every=function(t,e,r){o.each(t,function(t,i){e(t,function(t){t||(r(!1),r=function(){}),i()})},function(){r(!0)})},o.all=o.every,o.sortBy=function(t,e,r){o.map(t,function(t,r){e(t,function(e,i){e?r(e):r(null,{value:t,criteria:i})})},function(t,e){if(t)return r(t);var i=function(t,e){var r=t.criteria,i=e.criteria;return i>r?-1:r>i?1:0};r(null,u(e.sort(i),function(t){return t.value}))})},o.auto=function(t,e){e=e||function(){};var r=d(t),i=r.length;if(!i)return e();var n={},s=[],a=function(t){s.unshift(t)},u=function(t){for(var e=0;e<s.length;e+=1)if(s[e]===t)return void s.splice(e,1)},p=function(){i--,l(s.slice(0),function(t){t()})};a(function(){if(!i){var t=e;e=function(){},t(null,n)}}),l(r,function(r){var i=h(t[r])?t[r]:[t[r]],s=function(t){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),t){var s={};l(d(n),function(t){s[t]=n[t]}),s[r]=i,e(t,s),e=function(){}}else n[r]=i,o.setImmediate(p)},f=i.slice(0,Math.abs(i.length-1))||[],g=function(){return c(f,function(t,e){return t&&n.hasOwnProperty(e)},!0)&&!n.hasOwnProperty(r)};if(g())i[i.length-1](s,n);else{var v=function(){g()&&(u(v),i[i.length-1](s,n))};a(v)}})},o.retry=function(t,e,r){var i=5,n=[];"function"==typeof t&&(r=e,e=t,t=i),t=parseInt(t,10)||i;var s=function(i,s){for(var a=function(t,e){return function(r){t(function(t,i){r(!t||e,{err:t,result:i})},s)}};t;)n.push(a(e,!(t-=1)));o.series(n,function(t,e){e=e[e.length-1],(i||r)(e.err,e.result)})};return r?s():s},o.waterfall=function(t,e){if(e=e||function(){},!h(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}if(!t.length)return e();var i=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var n=Array.prototype.slice.call(arguments,1),s=t.next();n.push(s?i(s):e),o.setImmediate(function(){t.apply(null,n)})}}};i(o.iterator(t))()};var _=function(t,e,r){if(r=r||function(){},h(e))t.map(e,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},r);else{var i={};t.each(d(e),function(t,r){e[t](function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),i[t]=n,r(e)})},function(t){r(t,i)})}};o.parallel=function(t,e){_({map:o.map,each:o.each},t,e)},o.parallelLimit=function(t,e,r){_({map:y(e),each:p(e)},t,r)},o.series=function(t,e){if(e=e||function(){},h(t))o.mapSeries(t,function(t,e){t&&t(function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),e.call(null,t,r)})},e);else{var r={};o.eachSeries(d(t),function(e,i){t[e](function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),r[e]=n,i(t)})},function(t){e(t,r)})}},o.iterator=function(t){var e=function(r){var i=function(){return t.length&&t[r].apply(null,arguments),i.next()};return i.next=function(){return r<t.length-1?e(r+1):null},i};return e(0)},o.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var w=function(t,e,r,i){var n=[];t(e,function(t,e){r(t,function(t,r){n=n.concat(r||[]),e(t)})},function(t){i(t,n)})};o.concat=f(w),o.concatSeries=v(w),o.whilst=function(t,e,r){t()?e(function(i){return i?r(i):void o.whilst(t,e,r)}):r()},o.doWhilst=function(t,e,r){t(function(i){if(i)return r(i);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?o.doWhilst(t,e,r):r()})},o.until=function(t,e,r){t()?r():e(function(i){return i?r(i):void o.until(t,e,r)})},o.doUntil=function(t,e,r){t(function(i){if(i)return r(i);var n=Array.prototype.slice.call(arguments,1);e.apply(null,n)?r():o.doUntil(t,e,r)})},o.queue=function(t,e){function r(t,e,r,i){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?o.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var n={data:e,callback:"function"==typeof i?i:null};r?t.tasks.unshift(n):t.tasks.push(n),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}void 0===e&&(e=1);var n=0,s={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(s,t,!1,e)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(t,e){r(s,t,!0,e)},process:function(){if(!s.paused&&n<s.concurrency&&s.tasks.length){var e=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),n+=1;var r=function(){n-=1,e.callback&&e.callback.apply(e,arguments),s.drain&&s.tasks.length+n===0&&s.drain(),s.process()},o=i(r);t(e.data,o)}},length:function(){return s.tasks.length},running:function(){return n},idle:function(){return s.tasks.length+n===0},pause:function(){s.paused!==!0&&(s.paused=!0,s.process())},resume:function(){s.paused!==!1&&(s.paused=!1,s.process())}};return s},o.priorityQueue=function(t,e){function r(t,e){return t.priority-e.priority}function i(t,e,r){for(var i=-1,n=t.length-1;n>i;){var s=i+(n-i+1>>>1);r(e,t[s])>=0?i=s:n=s-1}return i}function n(t,e,n,s){return t.started||(t.started=!0),h(e)||(e=[e]),0==e.length?o.setImmediate(function(){t.drain&&t.drain()}):void l(e,function(e){var a={data:e,priority:n,callback:"function"==typeof s?s:null};t.tasks.splice(i(t.tasks,a,r)+1,0,a),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),o.setImmediate(t.process)})}var s=o.queue(t,e);return s.push=function(t,e,r){n(s,t,e,r)},delete s.unshift,s},o.cargo=function(t,e){var r=!1,i=[],n={tasks:i,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,r){h(t)||(t=[t]),l(t,function(t){i.push({data:t,callback:"function"==typeof r?r:null}),n.drained=!1,n.saturated&&i.length===e&&n.saturated()}),o.setImmediate(n.process)},process:function s(){if(!r){if(0===i.length)return n.drain&&!n.drained&&n.drain(),void(n.drained=!0);var o="number"==typeof e?i.splice(0,e):i.splice(0,i.length),a=u(o,function(t){return t.data});n.empty&&n.empty(),r=!0,t(a,function(){r=!1;var t=arguments;l(o,function(e){e.callback&&e.callback.apply(null,t)}),s()})}},length:function(){return i.length},running:function(){return r}};return n};var E=function(t){return function(e){var r=Array.prototype.slice.call(arguments,1);e.apply(null,r.concat([function(e){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&l(r,function(e){console[t](e)}))}]))}};o.log=E("log"),o.dir=E("dir"),o.memoize=function(t,e){var r={},i={};e=e||function(t){return t};var n=function(){var n=Array.prototype.slice.call(arguments),s=n.pop(),a=e.apply(null,n);a in r?o.nextTick(function(){s.apply(null,r[a])}):a in i?i[a].push(s):(i[a]=[s],t.apply(null,n.concat([function(){r[a]=arguments;var t=i[a];delete i[a];for(var e=0,n=t.length;n>e;e++)t[e].apply(null,arguments)}])))};return n.memo=r,n.unmemoized=t,n},o.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},o.times=function(t,e,r){for(var i=[],n=0;t>n;n++)i.push(n);return o.map(i,e,r)},o.timesSeries=function(t,e,r){for(var i=[],n=0;t>n;n++)i.push(n);return o.mapSeries(i,e,r)},o.seq=function(){var t=arguments;return function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();o.reduce(t,r,function(t,r,i){r.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);i(t,e)}]))},function(t,r){i.apply(e,[t].concat(r))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(t,e){var r=function(){var r=this,i=Array.prototype.slice.call(arguments),n=i.pop();return t(e,function(t,e){t.apply(r,i.concat([e]))},n)};if(arguments.length>2){var i=Array.prototype.slice.call(arguments,2);return r.apply(this,i)}return r};o.applyEach=f(S),o.applyEachSeries=v(S),o.forever=function(t,e){function r(i){if(i){if(e)return e(i);throw i}t(r)}r()},"undefined"!=typeof r&&r.exports?r.exports=o:"undefined"!=typeof t&&t.amd?t([],function(){return o}):n.async=o}()}).call(this,e("_process"))},{_process:3}],3:[function(t,e){function r(){if(!o){o=!0;for(var t,e=s.length;e;){t=s,s=[];for(var r=-1;++r<e;)t[r]();e=s.length}o=!1}}function i(){}var n=e.exports={},s=[],o=!1;n.nextTick=function(t){s.push(t),o||setTimeout(r,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.on=i,n.addListener=i,n.once=i,n.off=i,n.removeListener=i,n.removeAllListeners=i,n.emit=i,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],4:[function(e,r,i){!function(){function e(){this._events={},this._conf&&r.call(this,this._conf)}function r(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function n(t){this._events={},this.newListener=!1,r.call(this,t)}function s(t,e,r,i){if(!r)return[];var n,o,a,h,l,u,c,d=[],p=e.length,f=e[i],g=e[i+1];if(i===p&&r._listeners){if("function"==typeof r._listeners)return t&&t.push(r._listeners),[r];for(n=0,o=r._listeners.length;o>n;n++)t&&t.push(r._listeners[n]);return[r]}if("*"===f||"**"===f||r[f]){if("*"===f){for(a in r)"_listeners"!==a&&r.hasOwnProperty(a)&&(d=d.concat(s(t,e,r[a],i+1)));return d}if("**"===f){c=i+1===p||i+2===p&&"*"===g,c&&r._listeners&&(d=d.concat(s(t,e,r,p)));for(a in r)"_listeners"!==a&&r.hasOwnProperty(a)&&("*"===a||"**"===a?(r[a]._listeners&&!c&&(d=d.concat(s(t,e,r[a],p))),d=d.concat(s(t,e,r[a],i))):d=d.concat(a===g?s(t,e,r[a],i+2):s(t,e,r[a],i)));return d}d=d.concat(s(t,e,r[f],i+1))}if(h=r["*"],h&&s(t,e,h,i+1),l=r["**"])if(p>i){l._listeners&&s(t,e,l,p);for(a in l)"_listeners"!==a&&l.hasOwnProperty(a)&&(a===g?s(t,e,l[a],i+2):a===f?s(t,e,l[a],i+1):(u={},u[a]=l[a],s(t,e,{"**":u},i+1)))}else l._listeners?s(t,e,l,p):l["*"]&&l["*"]._listeners&&s(t,e,l["*"],p);return d}function o(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var r=0,i=t.length;i>r+1;r++)if("**"===t[r]&&"**"===t[r+1])return;for(var n=this.listenerTree,s=t.shift();s;){if(n[s]||(n[s]={}),n=n[s],0===t.length){if(n._listeners){if("function"==typeof n._listeners)n._listeners=[n._listeners,e];else if(a(n._listeners)&&(n._listeners.push(e),!n._listeners.warned)){var o=h;"undefined"!=typeof this._events.maxListeners&&(o=this._events.maxListeners),o>0&&n._listeners.length>o&&(n._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",n._listeners.length),console.trace())}}else n._listeners=e;return!0}s=t.shift()}return!0}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},h=10;n.prototype.delimiter=".",n.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},n.prototype.event="",n.prototype.once=function(t,e){return this.many(t,1,e),this},n.prototype.many=function(t,e,r){function i(){0===--e&&n.off(t,i),r.apply(this,arguments)}var n=this;if("function"!=typeof r)throw new Error("many only accepts instances of Function");return i._origin=r,this.on(t,i),n},n.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var r=arguments.length,i=new Array(r-1),n=1;r>n;n++)i[n-1]=arguments[n];for(n=0,r=this._all.length;r>n;n++)this.event=t,this._all[n].apply(this,i)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var a="string"==typeof t?t.split(this.delimiter):t.slice();s.call(this,o,a,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o){if(this.event=t,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var r=arguments.length,i=new Array(r-1),n=1;r>n;n++)i[n-1]=arguments[n];o.apply(this,i)}return!0}if(o){for(var r=arguments.length,i=new Array(r-1),n=1;r>n;n++)i[n-1]=arguments[n];for(var h=o.slice(),n=0,r=h.length;r>n;n++)this.event=t,h[n].apply(this,i);return h.length>0||!!this._all}return!!this._all},n.prototype.on=function(t,r){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof r)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,r),this.wildcard)return o.call(this,t,r),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],r];else if(a(this._events[t])&&(this._events[t].push(r),!this._events[t].warned)){var i=h;"undefined"!=typeof this._events.maxListeners&&(i=this._events.maxListeners),i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=r;return this},n.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},n.prototype.addListener=n.prototype.on,n.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var n="string"==typeof t?t.split(this.delimiter):t.slice();i=s.call(this,null,n,this.listenerTree,0)}else{if(!this._events[t])return this;r=this._events[t],i.push({_listeners:r})}for(var o=0;o<i.length;o++){var h=i[o];if(r=h._listeners,a(r)){for(var l=-1,u=0,c=r.length;c>u;u++)if(r[u]===e||r[u].listener&&r[u].listener===e||r[u]._origin&&r[u]._origin===e){l=u;break}if(0>l)continue;return this.wildcard?h._listeners.splice(l,1):this._events[t].splice(l,1),0===r.length&&(this.wildcard?delete h._listeners:delete this._events[t]),this}(r===e||r.listener&&r.listener===e||r._origin&&r._origin===e)&&(this.wildcard?delete h._listeners:delete this._events[t])}return this},n.prototype.offAny=function(t){var e,r=0,i=0;if(t&&this._all&&this._all.length>0){for(e=this._all,r=0,i=e.length;i>r;r++)if(t===e[r])return e.splice(r,1),this}else this._all=[];return this},n.prototype.removeListener=n.prototype.off,n.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var r="string"==typeof t?t.split(this.delimiter):t.slice(),i=s.call(this,null,r,this.listenerTree,0),n=0;n<i.length;n++){var o=i[n];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},n.prototype.listeners=function(t){if(this.wildcard){var r=[],i="string"==typeof t?t.split(this.delimiter):t.slice();return s.call(this,r,i,this.listenerTree,0),r}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},n.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return n}):"object"==typeof i?i.EventEmitter2=n:window.EventEmitter2=n}()},{}],5:[function(t,e){function r(t){s.call(this),this.baseUrl=t||"",this.queue=[],this.progress=0,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this.loadResource.bind(this),this._boundOnComplete=this._onComplete.bind(this)}var i=t("async"),n=t("./Resource"),s=t("eventemitter2").EventEmitter2;r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.add=r.prototype.enqueue=function(t,e){return this.queue.push(new n(this.baseUrl+t,e)),this},r.prototype.before=r.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},r.prototype.after=r.prototype.use=function(t){return this._afterMiddleware.push(t),this},r.prototype.reset=function(){this.queue.length=0,this.progress=0},r.prototype.load=function(t,e){return"function"==typeof t&&(e=t),"function"==typeof e&&this.once("complete",e),this._progressChunk=100/this.queue.length,this.emit("start"),t!==!1?i.each(this.queue,this._boundLoadResource,this._onComplete):i.eachSeries(this.queue,this._boundLoadResource,this._onComplete),this},r.prototype.loadResource=function(t,e){var r=this;this._runMiddleware(t,this._beforeMiddleware,function(){t.on("progress",r.emit.bind(r,"progress")),t.on("complete",r._onLoad.bind(r,t,e)),t.load()})},r.prototype._onComplete=function(){this.emit("complete")},r.prototype._onLoad=function(t,e){this.progress+=this._progressChunk,this.emit("progress",t),t.error?this.emit("error",t):this.emit("load",t),this._runMiddleware(t,this._afterMiddleware,e)},r.prototype._runMiddleware=function(t,e,r){var n=this;i.eachSeries(e,function(e,r){e.call(n,t,r)},r.bind(this,t))},r.LOAD_TYPE=n.LOAD_TYPE,r.XHR_READY_STATE=n.XHR_READY_STATE,r.XHR_RESPONSE_TYPE=n.XHR_RESPONSE_TYPE},{"./Resource":6,async:2,eventemitter2:4}],6:[function(t,e){function r(t,e){i.call(this),e=e||{},this.url=t,this.data=null,this.crossOrigin=e.crossOrigin,this.loadType=e.loadType||r.LOAD_TYPE.XHR,this.xhrType=e.xhrType||r.XHR_RESPONSE_TYPE.DEFAULT,this.error=null,this.xhr=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._xhrOnError=null,this._xhrOnAbort=null,this._xhrOnLoad=null}var i=t("eventemitter2").EventEmitter2;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener("error",this._xhrOnError),this.xhr.removeEventListener("abort",this._xhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._xhrOnLoad)),this.emit("complete",this)},r.prototype.load=function(){switch(this.emit("start",this),"string"!=typeof this.crossOrigin&&(this.crossOrigin=this._determineCrossOrigin()),this.loadType){case r.LOAD_TYPE.IMAGE:this._loadImage();break;case r.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case r.LOAD_TYPE.VIDEO:this._loadElement("video");break;case r.LOAD_TYPE.XHR:default:this._loadXhr()}},r.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=""),this.data.src=this.url,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},r.prototype._loadElement=function(t){if(this.data=document.createElement(t),Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},r.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this,e=this.xhr=new XMLHttpRequest;e.responseType=this.xhrType,e.addEventListener("error",this._xhrOnError=function(){t.error=new Error("XHR request failed. Status: "+e.status+', text: "'+e.statusText+'"'),t.complete()},!1),e.addEventListener("abort",this._xhrOnAbort=function(){t.error=new Error("XHR request was aborted by the user."),t.complete()},!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._xhrOnLoad=function(){t.data=t.xhrType===r.XHR_RESPONSE_TYPE.TEXT?e.responseText:t.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?e.responseXML||e.response:e.response,t.complete()},!1),e.open("GET",this.url,!0),e.send()},r.prototype._createSource=function(t,e,r){r||(r=t+"/"+e.substr(e.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=e,i.type=r,i},r.prototype._onError=function(t){this.error=t,this.complete()},r.prototype._onProgress=function(t){t.lengthComputable&&this.emit("progress",t.loaded/t.total)},r.prototype._determineCrossOrigin=function(){if(0===this.url.indexOf("data:"))return"";var t=window.location,e=document.createElement("a");return e.href=this.url,e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""},r.prototype._determineXhrType=function(){var t=this.url.substr(this.url.lastIndexOf(".")+1);switch(t){case"xhtml":case"html":case"htm":case"xml":case"tmx":case"tsx":case"svg":return r.XHR_RESPONSE_TYPE.DOCUMENT;case"gif":case"png":case"jpg":case"jpeg":case"tif":case"tiff":case"webp":return r.XHR_RESPONSE_TYPE.BLOB;case"json":return r.XHR_RESPONSE_TYPE.JSON;case"text":case"txt":default:return r.XHR_RESPONSE_TYPE.TEXT}},r.prototype._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},r.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},r.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"}},{eventemitter2:4}],7:[function(t,e){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{json:t("./middlewares/parsing/json"),blob:t("./middlewares/parsing/blob")}}},{"./Loader":5,"./Resource":6,"./middlewares/caching/memory":8,"./middlewares/parsing/blob":9,"./middlewares/parsing/json":10}],8:[function(t,e){var r={};e.exports=function(){return function(t,e){r[t.url]?(t.data=r[t.url],t.complete()):(t.once("complete",function(){r[this.url]=this.data}),e())}}},{}],9:[function(t,e){var r=t("../../Resource");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){t.xhr&&t.xhrType===r.XHR_RESPONSE_TYPE.BLOB&&0===t.data.type.indexOf("image")&&(t.data=new Image,t.data.src=URL.createObjectURL(t.data),t.data.onload=function(){URL.revokeObjectURL(t.data.src),t.data.onload=null}),e()}}},{"../../Resource":6}],10:[function(t,e){e.exports=function(){return function(t,e){if("string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(r){}e()}}},{}],11:[function(t,e){e.exports=function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(e){return!1}}},{}],12:[function(t,e){e.exports={name:"pixi.js",version:"3.0.0",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{test:"gulp test",docs:"./node_modules/.bin/jsdoc -c ./gulp/util/jsdoc.conf.json"},devDependencies:{brfs:"^1.2.0",browserify:"^8.0.2",chai:"^1.10.0",del:"^1.1.0",gulp:"^3.8.10","gulp-cached":"^1.0.1","gulp-jshint":"^1.9.0","gulp-plumber":"^0.6.6","gulp-rename":"^1.2.0","gulp-uglify":"^1.0.2","gulp-util":"^3.0.1","ink-docstrap":"^0.4.12",jsdoc:"^3.3.0-alpha13","jshint-summary":"^0.4.0",karma:"^0.12.28","karma-firefox-launcher":"^0.1.0","karma-mocha":"^0.1.10","karma-spec-reporter":"^0.0.16",minimist:"^1.1.0",mocha:"^2.1.0","require-dir":"^0.1.0","run-sequence":"^1.0.2","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.0.0",watchify:"^2.2.1"},dependencies:{async:"^0.9.0","resource-loader":"^1.0.0","webgl-enabled":"^1.0.2"},browserify:{transform:["brfs"]}}},{}],13:[function(t,e){e.exports={VERSION:t("../../package.json").version,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:"@2x",defaultRenderOptions:{view:null,resolution:1,antialias:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3}},{"../../package.json":12}],14:[function(t,e){function r(){n.call(this),this.children=[]}var i=t("../math"),n=t("./DisplayObject"),s=t("../textures/RenderTexture"),o=new i.Matrix;r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}}),r.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},r.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},r.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);if(0>r||0>i)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[r]=e,this.children[i]=t}},r.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},r.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);this.children.splice(r,1),this.children.splice(e,0,t)},r.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},r.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),e},r.prototype.removeChildren=function(t,e){var r=t||0,i="number"==typeof e?e:this.children.length,n=i-r;if(n>0&&i>=n){for(var s=this.children.splice(r,n),o=0;o<s.length;++o)s[o].parent=null;return s}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.generateTexture=function(t,e,r){var i=this.getLocalBounds(),n=new s(r,0|i.width,0|i.height,r,e,t);return o.tx=-i.x,o.ty=-i.y,n.render(this,o),n},r.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();
for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},r.prototype.containerUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(){if(0===this.children.length)return i.Rectangle.EMPTY;for(var t,e,r,n=1/0,s=1/0,o=-1/0,a=-1/0,h=!1,l=0,u=this.children.length;u>l;++l){var c=this.children[l];c.visible&&(h=!0,t=this.children[l].getBounds(),n=n<t.x?n:t.x,s=s<t.y?s:t.y,e=t.width+t.x,r=t.height+t.y,o=o>e?o:e,a=a>r?a:r)}return h?(this._bounds.x=n,this._bounds.y=s,this._bounds.width=o-n,this._bounds.height=a-s,this._bounds):i.Rectangle.EMPTY},r.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.Matrix.IDENTITY;for(var e=0,r=this.children.length;r>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this.getBounds()},r.prototype.renderWebGL=function(t){if(!(this.isMask||!this.visible||this.alpha<=0)){var e,r;if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,r=this.children.length;r>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,r=this.children.length;r>e;++e)this.children[e].renderWebGL(t)}},r.prototype._renderWebGL=function(){},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0,r=this.children.length;r>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},{"../math":23,"../textures/RenderTexture":59,"./DisplayObject":15}],15:[function(t,e){function r(){this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new i.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._isMask=!1,this._cacheIsDirty=!1}var i=t("../math");r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),r.prototype.updateTransform=function(){var t,e,r,n,s,o,a=this.parent.worldTransform,h=this.worldTransform;this.rotation%i.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,r=-this._sr*this.scale.y,n=this._cr*this.scale.y,s=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(s-=this.pivot.x*t+this.pivot.y*r,o-=this.pivot.x*e+this.pivot.y*n),h.a=t*a.a+e*a.c,h.b=t*a.b+e*a.d,h.c=r*a.a+n*a.c,h.d=r*a.b+n*a.d,h.tx=s*a.a+o*a.c+a.tx,h.ty=s*a.b+o*a.d+a.ty):(t=this.scale.x,n=this.scale.y,s=this.position.x-this.pivot.x*t,o=this.position.y-this.pivot.y*n,h.a=t*a.a,h.b=t*a.b,h.c=n*a.c,h.d=n*a.d,h.tx=s*a.a+o*a.c+a.tx,h.ty=s*a.b+o*a.d+a.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.displayObjectUpdateTransform=r.prototype.updateTransform,r.prototype.getBounds=function(){return i.Rectangle.EMPTY},r.prototype.getLocalBounds=function(){return this.getBounds(i.Matrix.IDENTITY)},r.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},r.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},r.prototype.renderWebGL=function(){},r.prototype.renderCanvas=function(){}},{"../math":23}],16:[function(t,e){function r(){i.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=u.blendModes.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.cachedSpriteDirty=!1}var i=t("../display/Container"),n=t("../sprites/Sprite"),s=t("../textures/Texture"),o=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../renderers/canvas/utils/CanvasGraphics"),h=t("./GraphicsData"),l=t("../math"),u=t("../const");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}}),h.prototype.clone=function(){var t=new r;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=this.dirty,t.glDirty=this.glDirty,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData.clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},r.prototype.lineStyle=function(t,e,r){return this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:r,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new l.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},r.prototype.moveTo=function(t,e){return this.drawShape(new l.Polygon([t,e])),this},r.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},r.prototype.quadraticCurveTo=function(t,e,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n,s,o=20,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var h=a[a.length-2],l=a[a.length-1],u=0,c=1;o>=c;++c)u=c/o,n=h+(t-h)*u,s=l+(e-l)*u,a.push(n+(t+(r-t)*u-n)*u,s+(e+(i-e)*u-s)*u);return this.dirty=!0,this},r.prototype.bezierCurveTo=function(t,e,r,i,n,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var o,a,h,l,u,c=20,d=this.currentPath.shape.points,p=d[d.length-2],f=d[d.length-1],g=0,v=1;c>=v;++v)g=v/c,o=1-g,a=o*o,h=a*o,l=g*g,u=l*g,d.push(h*p+3*a*g*t+3*o*l*r+u*n,h*f+3*a*g*e+3*o*l*i+u*s);return this.dirty=!0,this},r.prototype.arcTo=function(t,e,r,i,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1],h=a-e,l=o-t,u=i-e,c=r-t,d=Math.abs(h*c-l*u);if(1e-8>d||0===n)(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e);else{var p=h*h+l*l,f=u*u+c*c,g=h*u+l*c,v=n*Math.sqrt(p)/d,m=n*Math.sqrt(f)/d,y=v*g/p,x=m*g/f,b=v*c+m*l,T=v*u+m*h,_=l*(m+y),w=h*(m+y),E=c*(v+x),S=u*(v+x),A=Math.atan2(w-T,_-b),C=Math.atan2(S-T,E-b);this.arc(b+t,T+e,n,A,C,l*u>c*h)}return this.dirty=!0,this},r.prototype.arc=function(t,e,r,i,n,s){var o,a=t+Math.cos(i)*r,h=e+Math.sin(i)*r;if(this.currentPath?(o=this.currentPath.shape.points,0===o.length?o.push(a,h):(o[o.length-2]!==a||o[o.length-1]!==h)&&o.push(a,h)):(this.moveTo(a,h),o=this.currentPath.shape.points),i===n)return this;!s&&i>=n?n+=2*Math.PI:s&&n>=i&&(i+=2*Math.PI);var l=s?-1*(i-n):n-i,u=Math.abs(l)/(2*Math.PI)*40;if(0===l)return this;for(var c=l/(2*u),d=2*c,p=Math.cos(c),f=Math.sin(c),g=u-1,v=g%1/g,m=0;g>=m;++m){var y=m+v*m,x=c+i+d*y,b=Math.cos(x),T=-Math.sin(x);o.push((p*b+f*T)*r+t,(p*-T+f*b)*r+e)}return this.dirty=!0,this},r.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},r.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},r.prototype.drawRect=function(t,e,r,i){return this.drawShape(new l.Rectangle(t,e,r,i)),this},r.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new l.RoundedRectangle(t,e,r,i,n)),this},r.prototype.drawCircle=function(t,e,r){return this.drawShape(new l.Circle(t,e,r)),this},r.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new l.Ellipse(t,e,r,i)),this},r.prototype.drawPolygon=function(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.drawShape(new l.Polygon(t)),this},r.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},r.prototype.generateTexture=function(t,e){t=t||1;var r=this.getBounds(),i=new o(r.width*t,r.height*t),n=s.fromCanvas(i.canvas,e);return n.baseTexture.resolution=t,i.context.scale(t,t),i.context.translate(-r.x,-r.y),a.renderGraphics(this,i.context),n},r.prototype._renderWebGL=function(t){this.isMask!==!0&&(this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.isMask!==!0&&this.renderable){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.prototype.renderCanvas.call(this._cachedSprite,t);var e=t.context,r=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=t.blendModes[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var i=t.resolution;e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),a.renderGraphics(this,e);for(var s=0,o=this.children.length;o>s;++s)this.children[s].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},r.prototype.getBounds=function(t){if(this.isMask)return l.Rectangle.EMPTY;this.dirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var e=this._localBounds,r=e.x,i=e.width+e.x,n=e.y,s=e.height+e.y,o=t||this.worldTransform,a=o.a,h=o.b,u=o.c,c=o.d,d=o.tx,p=o.ty,f=a*i+u*s+d,g=c*s+h*i+p,v=a*r+u*s+d,m=c*s+h*r+p,y=a*r+u*n+d,x=c*n+h*r+p,b=a*i+u*n+d,T=c*n+h*i+p,_=f,w=g,E=f,S=g;return E=E>v?v:E,E=E>y?y:E,E=E>b?b:E,S=S>m?m:S,S=S>x?x:S,S=S>T?T:S,_=v>_?v:_,_=y>_?y:_,_=b>_?b:_,w=m>w?m:w,w=x>w?x:w,w=T>w?T:w,this._bounds.x=E,this._bounds.width=_-E,this._bounds.y=S,this._bounds.height=w-S,this._bounds},r.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var n,s,o,a,h,l,c=0;c<this.graphicsData.length;c++){var d=this.graphicsData[c],p=d.type,f=d.lineWidth;if(n=d.shape,p===u.SHAPES.RECT||p===u.SHAPES.RREC)o=n.x-f/2,a=n.y-f/2,h=n.width+f,l=n.height+f,t=t>o?o:t,e=o+h>e?o+h:e,r=r>a?a:r,i=a+l>i?a+l:i;else if(p===u.SHAPES.CIRC)o=n.x,a=n.y,h=n.radius+f/2,l=n.radius+f/2,t=t>o-h?o-h:t,e=o+h>e?o+h:e,r=r>a-l?a-l:r,i=a+l>i?a+l:i;else if(p===u.SHAPES.ELIP)o=n.x,a=n.y,h=n.width+f/2,l=n.height+f/2,t=t>o-h?o-h:t,e=o+h>e?o+h:e,r=r>a-l?a-l:r,i=a+l>i?a+l:i;else{s=n.points;for(var g=0;g<s.length;g+=2)o=s[g],a=s[g+1],t=t>o-f?o-f:t,e=o+f>e?o+f:e,r=r>a-f?a-f:r,i=a+f>i?a+f:i}}else t=0,e=0,r=0,i=0;var v=this.boundsPadding;this._localBounds.x=t-v,this._localBounds.width=e-t+2*v,this._localBounds.y=r-v,this._localBounds.height=i-r+2*v},r.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new o(t.width,t.height),r=s.fromCanvas(e.canvas);this._cachedSprite=new n(r),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,a.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},r.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,r=t.buffer.canvas;e.baseTexture.width=r.width,e.baseTexture.height=r.height,e.crop.width=e.frame.width=r.width,e.crop.height=e.frame.height=r.height,t._width=r.width,t._height=r.height,e.baseTexture.dirty()},r.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},r.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=!0,e}},{"../const":13,"../display/Container":14,"../math":23,"../renderers/canvas/utils/CanvasBuffer":35,"../renderers/canvas/utils/CanvasGraphics":36,"../sprites/Sprite":56,"../textures/Texture":60,"./GraphicsData":17}],17:[function(t,e){function r(t,e,r,i,n,s,o){this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=i,this.fillAlpha=n,this._fillTint=i,this.fill=s,this.shape=o,this.type=o.type}r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)}},{}],18:[function(t,e){function r(t){o.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null}var i=t("../../utils"),n=t("../../math"),s=t("../../const"),o=t("../../renderers/webgl/utils/ObjectRenderer"),a=t("../../renderers/webgl/WebGLRenderer"),h=t("./WebGLGraphicsData");r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r,a.registerPlugin("graphics",r),r.prototype.onContextChange=function(){},r.prototype.destroy=function(){o.prototype.destroy.call(this),this.graphicsDataPool=null},r.prototype.render=function(t){var e,r=this.renderer,n=r.gl,s=r.shaderManager.plugins.primitiveShader;t.dirty&&this.updateGraphics(t,n);var o=t._webGL[n.id];r.blendModeManager.setBlendMode(t.blendMode);for(var a=0;a<o.data.length;a++)1===o.data[a].mode?(e=o.data[a],r.stencilManager.pushStencil(t,e,r),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilManager.popStencil(t,e,r)):(e=o.data[a],s=r.shaderManager.primitiveShader,r.shaderManager.setShader(s),n.uniformMatrix3fv(s.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(s.uniforms.projectionMatrix._location,!1,r.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(s.uniforms.tint._location,i.hex2rgb(t.tint)),n.uniform1f(s.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0))},r.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[e.id];r||(r=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1;var i;if(t.clearDirty){for(t.clearDirty=!1,i=0;i<r.data.length;i++){var n=r.data[i];n.reset(),this.graphicsDataPool.push(n)}r.data=[],r.lastIndex=0}var o;for(i=r.lastIndex;i<t.graphicsData.length;i++){var a=t.graphicsData[i];if(a.type===s.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<12){o=this.switchMode(r,0);var h=this.buildPoly(a,o);h||(o=this.switchMode(r,1),this.buildComplexPoly(a,o))}else o=this.switchMode(r,1),this.buildComplexPoly(a,o);a.lineWidth>0&&(o=this.switchMode(r,0),this.buildLine(a,o))}else o=this.switchMode(r,0),a.type===s.SHAPES.RECT?this.buildRectangle(a,o):a.type===s.SHAPES.CIRC||a.type===s.SHAPES.ELIP?this.buildCircle(a,o):a.type===s.SHAPES.RREC&&this.buildRoundedRectangle(a,o);r.lastIndex++}for(i=0;i<r.data.length;i++)o=r.data[i],o.dirty&&o.upload()},r.prototype.switchMode=function(t,e){var r;return t.data.length?(r=t.data[t.data.length-1],(r.mode!==e||1===e)&&(r=this.graphicsDataPool.pop()||new h(t.gl),r.mode=e,t.data.push(r))):(r=this.graphicsDataPool.pop()||new h(t.gl),r.mode=e,t.data.push(r)),r.dirty=!0,r},r.prototype.buildRectangle=function(t,e){var r=t.shape,n=r.x,s=r.y,o=r.width,a=r.height;if(t.fill){var h=i.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,d=h[2]*l,p=e.points,f=e.indices,g=p.length/6;p.push(n,s),p.push(u,c,d,l),p.push(n+o,s),p.push(u,c,d,l),p.push(n,s+a),p.push(u,c,d,l),p.push(n+o,s+a),p.push(u,c,d,l),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var v=t.points;t.points=[n,s,n+o,s,n+o,s+a,n,s+a,n,s],this.buildLine(t,e),t.points=v}},r.prototype.buildRoundedRectangle=function(t,e){var r=t.shape,n=r.x,s=r.y,o=r.width,a=r.height,h=r.radius,l=[];if(l.push(n,s+h),l=l.concat(this.quadraticBezierCurve(n,s+a-h,n,s+a,n+h,s+a)),l=l.concat(this.quadraticBezierCurve(n+o-h,s+a,n+o,s+a,n+o,s+a-h)),l=l.concat(this.quadraticBezierCurve(n+o,s+h,n+o,s,n+o-h,s)),l=l.concat(this.quadraticBezierCurve(n+h,s,n,s,n,s+h)),t.fill){var u=i.hex2rgb(t.fillColor),c=t.fillAlpha,d=u[0]*c,p=u[1]*c,f=u[2]*c,g=e.points,v=e.indices,m=g.length/6,y=i.PolyK.Triangulate(l),x=0;for(x=0;x<y.length;x+=3)v.push(y[x]+m),v.push(y[x]+m),v.push(y[x+1]+m),v.push(y[x+2]+m),v.push(y[x+2]+m);for(x=0;x<l.length;x++)g.push(l[x],l[++x],d,p,f,c)}if(t.lineWidth){var b=t.points;t.points=l,this.buildLine(t,e),t.points=b}},r.prototype.quadraticBezierCurve=function(t,e,r,i,n,s){function o(t,e,r){var i=e-t;return t+i*r}for(var a,h,l,u,c,d,p=20,f=[],g=0,v=0;p>=v;v++)g=v/p,a=o(t,r,g),h=o(e,i,g),l=o(r,n,g),u=o(i,s,g),c=o(a,l,g),d=o(h,u,g),f.push(c,d);return f},r.prototype.buildCircle=function(t,e){var r,n,o=t.shape,a=o.x,h=o.y;t.type===s.SHAPES.CIRC?(r=o.radius,n=o.radius):(r=o.width,n=o.height);var l=40,u=2*Math.PI/l,c=0;if(t.fill){var d=i.hex2rgb(t.fillColor),p=t.fillAlpha,f=d[0]*p,g=d[1]*p,v=d[2]*p,m=e.points,y=e.indices,x=m.length/6;for(y.push(x),c=0;l+1>c;c++)m.push(a,h,f,g,v,p),m.push(a+Math.sin(u*c)*r,h+Math.cos(u*c)*n,f,g,v,p),y.push(x++,x++);y.push(x-1)}if(t.lineWidth){var b=t.points;for(t.points=[],c=0;l+1>c;c++)t.points.push(a+Math.sin(u*c)*r,h+Math.cos(u*c)*n);this.buildLine(t,e),t.points=b}},r.prototype.buildLine=function(t,e){var r=0,s=t.points;if(0!==s.length){if(t.lineWidth%2)for(r=0;r<s.length;r++)s[r]+=.5;var o=new n.Point(s[0],s[1]),a=new n.Point(s[s.length-2],s[s.length-1]);if(o.x===a.x&&o.y===a.y){s=s.slice(),s.pop(),s.pop(),a=new n.Point(s[s.length-2],s[s.length-1]);var h=a.x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);s.unshift(h,l),s.push(h,l)}var u,c,d,p,f,g,v,m,y,x,b,T,_,w,E,S,A,C,R,M,F,P,O,D=e.points,B=e.indices,L=s.length/2,I=s.length,k=D.length/6,U=t.lineWidth/2,N=i.hex2rgb(t.lineColor),Y=t.lineAlpha,X=N[0]*Y,j=N[1]*Y,G=N[2]*Y;for(d=s[0],p=s[1],f=s[2],g=s[3],y=-(p-g),x=d-f,O=Math.sqrt(y*y+x*x),y/=O,x/=O,y*=U,x*=U,D.push(d-y,p-x,X,j,G,Y),D.push(d+y,p+x,X,j,G,Y),r=1;L-1>r;r++)d=s[2*(r-1)],p=s[2*(r-1)+1],f=s[2*r],g=s[2*r+1],v=s[2*(r+1)],m=s[2*(r+1)+1],y=-(p-g),x=d-f,O=Math.sqrt(y*y+x*x),y/=O,x/=O,y*=U,x*=U,b=-(g-m),T=f-v,O=Math.sqrt(b*b+T*T),b/=O,T/=O,b*=U,T*=U,E=-x+p-(-x+g),S=-y+f-(-y+d),A=(-y+d)*(-x+g)-(-y+f)*(-x+p),C=-T+m-(-T+g),R=-b+f-(-b+v),M=(-b+v)*(-T+g)-(-b+f)*(-T+m),F=E*R-C*S,Math.abs(F)<.1?(F+=10.1,D.push(f-y,g-x,X,j,G,Y),D.push(f+y,g+x,X,j,G,Y)):(u=(S*M-R*A)/F,c=(C*A-E*M)/F,P=(u-f)*(u-f)+(c-g)+(c-g),P>19600?(_=y-b,w=x-T,O=Math.sqrt(_*_+w*w),_/=O,w/=O,_*=U,w*=U,D.push(f-_,g-w),D.push(X,j,G,Y),D.push(f+_,g+w),D.push(X,j,G,Y),D.push(f-_,g-w),D.push(X,j,G,Y),I++):(D.push(u,c),D.push(X,j,G,Y),D.push(f-(u-f),g-(c-g)),D.push(X,j,G,Y)));for(d=s[2*(L-2)],p=s[2*(L-2)+1],f=s[2*(L-1)],g=s[2*(L-1)+1],y=-(p-g),x=d-f,O=Math.sqrt(y*y+x*x),y/=O,x/=O,y*=U,x*=U,D.push(f-y,g-x),D.push(X,j,G,Y),D.push(f+y,g+x),D.push(X,j,G,Y),B.push(k),r=0;I>r;r++)B.push(k++);B.push(k-1)}},r.prototype.buildComplexPoly=function(t,e){var r=t.points.slice();if(!(r.length<6)){var n=e.indices;e.points=r,e.alpha=t.fillAlpha,e.color=i.hex2rgb(t.fillColor);for(var s,o,a=1/0,h=-1/0,l=1/0,u=-1/0,c=0;c<r.length;c+=2)s=r[c],o=r[c+1],a=a>s?s:a,h=s>h?s:h,l=l>o?o:l,u=o>u?o:u;r.push(a,l,h,l,h,u,a,u);var d=r.length/2;for(c=0;d>c;c++)n.push(c)}},r.prototype.buildPoly=function(t,e){var r=t.points;if(!(r.length<6)){var n=e.points,s=e.indices,o=r.length/2,a=i.hex2rgb(t.fillColor),h=t.fillAlpha,l=a[0]*h,u=a[1]*h,c=a[2]*h,d=i.PolyK.Triangulate(r);if(!d)return!1;var p=n.length/6,f=0;for(f=0;f<d.length;f+=3)s.push(d[f]+p),s.push(d[f]+p),s.push(d[f+1]+p),s.push(d[f+2]+p),s.push(d[f+2]+p);for(f=0;o>f;f++)n.push(r[2*f],r[2*f+1],l,u,c,h);return!0}}},{"../../const":13,"../../math":23,"../../renderers/webgl/WebGLRenderer":39,"../../renderers/webgl/utils/ObjectRenderer":52,"../../utils":66,"./WebGLGraphicsData":19}],19:[function(t,e){function r(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0}r.prototype.constructor=r,e.exports=r,r.prototype.reset=function(){this.points=[],this.indices=[]},r.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1}},{}],20:[function(t,e){var r=e.exports={CONST:t("./const"),utils:t("./utils"),math:t("./math"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Stage:t("./display/Container"),DisplayObjectContainer:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),autoDetectRenderer:function(e,i,n,s){return e=e||800,i=i||600,!s&&t("webgl-enabled")()?new r.WebGLRenderer(e,i,n):new r.CanvasRenderer(e,i,n)},autoDetectRecommendedRenderer:function(t,e,i){var n=/Android/i.test(navigator.userAgent);return r.autoDetectRenderer(t,e,i,n)}}},{"./const":13,"./display/Container":14,"./display/DisplayObject":15,"./graphics/Graphics":16,"./graphics/GraphicsData":17,"./graphics/webgl/GraphicsRenderer":18,"./math":23,"./particles/ParticleContainer":29,"./particles/webgl/ParticleRenderer":31,"./renderers/canvas/CanvasRenderer":34,"./renderers/canvas/utils/CanvasBuffer":35,"./renderers/canvas/utils/CanvasGraphics":36,"./renderers/webgl/WebGLRenderer":39,"./renderers/webgl/filters/AbstractFilter":40,"./renderers/webgl/managers/ShaderManager":45,"./renderers/webgl/shaders/Shader":50,"./sprites/Sprite":56,"./sprites/webgl/SpriteRenderer":57,"./textures/BaseTexture":58,"./textures/RenderTexture":59,"./textures/Texture":60,"./textures/VideoBaseTexture":62,"./utils":66,"webgl-enabled":11}],21:[function(t,e){function r(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var i=t("./Point");r.prototype.constructor=r,e.exports=r,r.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},r.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},r.prototype.apply=function(t,e){return e=e||new i,e.x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},r.prototype.applyInverse=function(t,e){e=e||new i;var r=1/(this.a*this.d+this.c*-this.b);return e.x=this.d*r*t.x+-this.c*r*t.y+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*t.y+-this.b*r*t.x+(-this.ty*this.a+this.tx*this.b)*r,e},r.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},r.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},r.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,s=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=s*e-this.ty*r,this.ty=s*r+this.ty*e,this},r.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},r.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},r.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,s=t*i-e*r;return this.a=i/s,this.b=-e/s,this.c=-r/s,this.d=t/s,this.tx=(r*this.ty-i*n)/s,this.ty=-(t*this.ty-e*n)/s,this},r.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},r.prototype.clone=function(){var t=new r;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r.IDENTITY=new r,r.TEMP_MATRIX=new r},{"./Point":22}],22:[function(t,e){function r(t,e){this.x=t||0,this.y=e||0}r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],23:[function(t,e){e.exports={PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":21,"./Point":22,"./shapes/Circle":24,"./shapes/Ellipse":25,"./shapes/Polygon":26,"./shapes/Rectangle":27,"./shapes/RoundedRectangle":28}],24:[function(t,e){function r(t,e,r){this.x=t||0,this.y=e||0,this.radius=r||0,this.type=n.SHAPES.CIRC}var i=t("./Rectangle"),n=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.radius)},r.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.x-t,i=this.y-e,n=this.radius*this.radius;return r*=r,i*=i,n>=r+i},r.prototype.getBounds=function(){return new i(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":13,"./Rectangle":27}],25:[function(t,e){function r(t,e,r,i){this.x=t||0,this.y=e||0,this.width=r||0,this.height=i||0,this.type=n.SHAPES.ELIP}var i=t("./Rectangle"),n=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return r*=r,i*=i,1>=r+i},r.prototype.getBounds=function(){return new i(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":13,"./Rectangle":27}],26:[function(t,e){function r(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),t[0]instanceof i){for(var e=[],r=0,s=t.length;s>r;r++)e.push(t[r].x,t[r].y);t=e}this.closed=!0,this.points=t,this.type=n.SHAPES.POLY}var i=t("../Point"),n=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.points.slice())},r.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,s=i-1;i>n;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],l=this.points[2*s+1],u=a>e!=l>e&&(h-o)*(e-a)/(l-a)+o>t;u&&(r=!r)}return r}},{"../../const":13,"../Point":22}],27:[function(t,e){function r(t,e,r,n){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.type=i.SHAPES.RECT}var i=t("../../const");r.prototype.constructor=r,e.exports=r,r.EMPTY=new r(0,0,0,0),r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height)},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height?!0:!1}},{"../../const":13}],28:[function(t,e){function r(t,e,r,n,s){this.x=t||0,this.y=e||0,this.width=r||0,this.height=n||0,this.radius=s||20,this.type=i.SHAPES.RREC}var i=t("../../const");r.prototype.constructor=r,e.exports=r,r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.radius)},r.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height?!0:!1}},{"../../const":13}],29:[function(t,e){function r(t,e){i.call(this),this._properties=e||[!1,!0,!1,!1,!1],this._size=t||15e3,this._buffers=null,this._updateStatic=!1}var i=t("../display/Container");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},r.prototype.renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length,t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this)},r.prototype.addChildAt=function(t,e){if(t===this)return t;if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this._updateStatic=!0,t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},r.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,this.children.splice(t,1),this._updateStatic=!0,e},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,i=!0;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var n=0;n<this.children.length;++n){var s=this.children[n];if(s.visible){var o=s.texture.frame;if(e.globalAlpha=this.worldAlpha*s.alpha,s.rotation%(2*Math.PI)===0)i&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx,r.ty),i=!1),e.drawImage(s.texture.baseTexture.source,o.x,o.y,o.width,o.height,s.anchor.x*-o.width*s.scale.x+s.position.x+.5|0,s.anchor.y*-o.height*s.scale.y+s.position.y+.5|0,o.width*s.scale.x,o.height*s.scale.y);else{i||(i=!0),s.displayObjectUpdateTransform();var a=s.worldTransform;t.roundPixels?e.setTransform(a.a,a.b,a.c,a.d,0|a.tx,0|a.ty):e.setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty),e.drawImage(s.texture.baseTexture.source,o.x,o.y,o.width,o.height,s.anchor.x*-o.width+.5|0,s.anchor.y*-o.height+.5|0,o.width,o.height)}}}}}},{"../display/Container":14}],30:[function(t,e){function r(t,e,r){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=r,this.dynamicProperties=[],this.staticProperties=[];
for(var i=0;i<e.length;i++){var n=e[i];n.dynamic?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}r.prototype.constructor=r,e.exports=r,r.prototype.initBuffers=function(){var t,e,r=this.gl,i=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],e.offset=i,i+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),r.bufferData(r.ARRAY_BUFFER,this.dynamicData,r.DYNAMIC_DRAW);var n=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],e.offset=n,n+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),r.bufferData(r.ARRAY_BUFFER,this.staticData,r.DYNAMIC_DRAW)},r.prototype.uploadDynamic=function(t,e,r){for(var i=this.gl,n=0;n<this.dynamicProperties.length;n++){var s=this.dynamicProperties[n];s.uploadFunction(t,e,r,this.dynamicData,this.dynamicStride,s.offset)}i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.dynamicData)},r.prototype.uploadStatic=function(t,e,r){for(var i=this.gl,n=0;n<this.staticProperties.length;n++){var s=this.staticProperties[n];s.uploadFunction(t,e,r,this.staticData,this.staticStride,s.offset)}i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,this.staticData)},r.prototype.bind=function(){var t,e,r=this.gl;for(r.bindBuffer(r.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(r.bindBuffer(r.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],r.vertexAttribPointer(e.attribute,e.size,r.FLOAT,!1,4*this.staticStride,4*e.offset)},r.prototype.destroy=function(){}},{}],31:[function(t,e){function r(t){i.call(this,t),this.size=15e3;var e=6*this.size;this.indices=new Uint16Array(e);for(var r=0,n=0;e>r;r+=6,n+=4)this.indices[r+0]=n+0,this.indices[r+1]=n+1,this.indices[r+2]=n+2,this.indices[r+3]=n+0,this.indices[r+4]=n+2,this.indices[r+5]=n+3;this.shader=null,this.tempMatrix=new a.Matrix}var i=t("../../renderers/webgl/utils/ObjectRenderer"),n=t("../../renderers/webgl/WebGLRenderer"),s=t("./ParticleShader"),o=t("./ParticleBuffer"),a=t("../../math");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,n.registerPlugin("particle",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:!1,size:2,uploadFunction:this.uploadVerticies,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:!0,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:!1,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:!1,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:!1,size:1,uploadFunction:this.uploadAlpha,offset:0}]},r.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},r.prototype.render=function(t){var e=t.children,r=e.length,i=t._size;if(0!==r){r>i&&(r=i),t._buffers||(t._buffers=this.generateBuffers(t));var n=this.renderer.gl,s=t.worldTransform.copy(this.tempMatrix);s.prepend(this.renderer.currentRenderTarget.projectionMatrix),n.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,s.toArray(!0));var o=t._updateStatic,a=e[0]._texture.baseTexture;a._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,a._glTextures[n.id]):(this.renderer.updateTexture(a),this.properties[0].dynamic&&this.properties[3].dynamic||(o=!0));for(var h=0,l=0;r>l;l+=this.size){var u=r-l;u>this.size&&(u=this.size);var c=t._buffers[h++];c.uploadDynamic(e,l,u),o&&c.uploadStatic(e,l,u),c.bind(this.shader),n.drawElements(n.TRIANGLES,6*u,n.UNSIGNED_SHORT,0),this.renderer.drawCount++}t._updateStatic=!1}},r.prototype.generateBuffers=function(t){var e,r=this.renderer.gl,i=[],n=t._size;for(e=0;e<t._properties.length;e++)this.properties[e].dynamic=t._properties[e];for(e=0;n>e;e+=this.size)i.push(new o(r,this.properties,this.size,this.shader));return i},r.prototype.uploadVerticies=function(t,e,r,i,n,s){for(var o,a,h,l,u,c,d,p,f,g=0;r>g;g++)o=t[e+g],a=o._texture,l=o.scale.x,u=o.scale.y,a.trim?(h=a.trim,d=h.x-o.anchor.x*h.width,c=d+a.crop.width,f=h.y-o.anchor.y*h.height,p=f+a.crop.height):(c=a._frame.width*(1-o.anchor.x),d=a._frame.width*-o.anchor.x,p=a._frame.height*(1-o.anchor.y),f=a._frame.height*-o.anchor.y),i[s]=d*l,i[s+1]=f*u,i[s+n]=c*l,i[s+n+1]=f*u,i[s+2*n]=c*l,i[s+2*n+1]=p*u,i[s+3*n]=d*l,i[s+3*n+1]=p*u,s+=4*n},r.prototype.uploadPosition=function(t,e,r,i,n,s){for(var o=0;r>o;o++){var a=t[e+o].position;i[s]=a.x,i[s+1]=a.y,i[s+n]=a.x,i[s+n+1]=a.y,i[s+2*n]=a.x,i[s+2*n+1]=a.y,i[s+3*n]=a.x,i[s+3*n+1]=a.y,s+=4*n}},r.prototype.uploadRotation=function(t,e,r,i,n,s){for(var o=0;r>o;o++){var a=t[e+o].rotation;i[s]=a,i[s+n]=a,i[s+2*n]=a,i[s+3*n]=a,s+=4*n}},r.prototype.uploadUvs=function(t,e,r,i,n,s){for(var o=0;r>o;o++){var a=t[e+o]._texture._uvs;a?(i[s]=a.x0,i[s+1]=a.y0,i[s+n]=a.x1,i[s+n+1]=a.y1,i[s+2*n]=a.x2,i[s+2*n+1]=a.y2,i[s+3*n]=a.x3,i[s+3*n+1]=a.y3,s+=4*n):(i[s]=0,i[s+1]=0,i[s+n]=0,i[s+n+1]=0,i[s+2*n]=0,i[s+2*n+1]=0,i[s+3*n]=0,i[s+3*n+1]=0,s+=4*n)}},r.prototype.uploadAlpha=function(t,e,r,i,n,s){for(var o=0;r>o;o++){var a=t[e+o].alpha;i[s]=a,i[s+n]=a,i[s+2*n]=a,i[s+3*n]=a,s+=4*n}},r.prototype.destroy=function(){this.shader.destroy()}},{"../../math":23,"../../renderers/webgl/WebGLRenderer":39,"../../renderers/webgl/utils/ObjectRenderer":52,"./ParticleBuffer":30,"./ParticleShader":32}],32:[function(t,e){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n"),null,{aPositionCoord:0,aRotation:0})}var i=t("../../renderers/webgl/shaders/TextureShader");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},{"../../renderers/webgl/shaders/TextureShader":51}],33:[function(t,e){function r(t,e,r,s){if(i.sayHello(t),s)for(var o in n.defaultRenderOptions)"undefined"==typeof s[o]&&(s[o]=n.defaultRenderOptions[o]);else s=n.defaultRenderOptions;this.type=n.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=r||600,this.view=s.view||document.createElement("canvas"),this.resolution=s.resolution,this.transparent=s.transparent,this.autoResize=s.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=s.preserveDrawingBuffer,this.clearBeforeRender=s.clearBeforeRender,this._backgroundColor=16777215,this._backgroundColorRgb=[1,1,1],this._backgroundColorString="#000000",this.backgroundColor=s.backgroundColor||this._backgroundColor}var i=t("../utils"),n=t("../const");r.prototype.constructor=r,e.exports=r,i.eventTarget.mixin(r.prototype),Object.defineProperties(r.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=i.hex2string(t),i.hex2rgb(t,this._backgroundColorRgb)}}}),r.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},r.prototype.destroy=function(t){t&&this.view.parent&&this.view.parent.removeChild(this.view),this.type=n.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":13,"../utils":66}],34:[function(t,e){function r(t,e,r){i.call(this,"Canvas",t,e,r),this.type=a.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new n,this.roundPixels=!1,this.currentScaleMode=a.scaleModes.DEFAULT,this.currentBlendMode=a.blendModes.NORMAL,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new o.Matrix,worldAlpha:1},this.resize(t,e)}var i=t("../SystemRenderer"),n=t("./utils/CanvasMaskManager"),s=t("../../utils"),o=t("../../math"),a=t("../../const");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.render=function(t){var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.currentBlendMode=a.blendModes.NORMAL,this.context.globalCompositeOperation=this.blendModes[a.blendModes.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context)},r.prototype.destroy=function(t){i.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.roundPixels=!1,this.currentScaleMode=0,this.currentBlendMode=0,this.smoothProperty=null},r.prototype.renderDisplayObject=function(t,e){var r=this.context;this.context=e,t.renderCanvas(this),this.context=r},r.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},s.canUseNewCanvasBlendModes()?(this.blendModes[a.blendModes.NORMAL]="source-over",this.blendModes[a.blendModes.ADD]="lighter",this.blendModes[a.blendModes.MULTIPLY]="multiply",this.blendModes[a.blendModes.SCREEN]="screen",this.blendModes[a.blendModes.OVERLAY]="overlay",this.blendModes[a.blendModes.DARKEN]="darken",this.blendModes[a.blendModes.LIGHTEN]="lighten",this.blendModes[a.blendModes.COLOR_DODGE]="color-dodge",this.blendModes[a.blendModes.COLOR_BURN]="color-burn",this.blendModes[a.blendModes.HARD_LIGHT]="hard-light",this.blendModes[a.blendModes.SOFT_LIGHT]="soft-light",this.blendModes[a.blendModes.DIFFERENCE]="difference",this.blendModes[a.blendModes.EXCLUSION]="exclusion",this.blendModes[a.blendModes.HUE]="hue",this.blendModes[a.blendModes.SATURATION]="saturation",this.blendModes[a.blendModes.COLOR]="color",this.blendModes[a.blendModes.LUMINOSITY]="luminosity"):(this.blendModes[a.blendModes.NORMAL]="source-over",this.blendModes[a.blendModes.ADD]="lighter",this.blendModes[a.blendModes.MULTIPLY]="source-over",this.blendModes[a.blendModes.SCREEN]="source-over",this.blendModes[a.blendModes.OVERLAY]="source-over",this.blendModes[a.blendModes.DARKEN]="source-over",this.blendModes[a.blendModes.LIGHTEN]="source-over",this.blendModes[a.blendModes.COLOR_DODGE]="source-over",this.blendModes[a.blendModes.COLOR_BURN]="source-over",this.blendModes[a.blendModes.HARD_LIGHT]="source-over",this.blendModes[a.blendModes.SOFT_LIGHT]="source-over",this.blendModes[a.blendModes.DIFFERENCE]="source-over",this.blendModes[a.blendModes.EXCLUSION]="source-over",this.blendModes[a.blendModes.HUE]="source-over",this.blendModes[a.blendModes.SATURATION]="source-over",this.blendModes[a.blendModes.COLOR]="source-over",this.blendModes[a.blendModes.LUMINOSITY]="source-over"))}},{"../../const":13,"../../math":23,"../../utils":66,"../SystemRenderer":33,"./utils/CanvasMaskManager":37}],35:[function(t,e){function r(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),r.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},r.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e}},{}],36:[function(t,e){var r=t("../../../const"),i=e.exports={};i.renderGraphics=function(t,e){var i=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var s=t.graphicsData[n],o=s.shape,a=s._fillTint,h=s._lineTint;if(e.lineWidth=s.lineWidth,s.type===r.SHAPES.POLY){e.beginPath();var l=o.points;e.moveTo(l[0],l[1]);for(var u=1;u<l.length/2;u++)e.lineTo(l[2*u],l[2*u+1]);o.closed&&e.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===r.SHAPES.RECT)(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(o.x,o.y,o.width,o.height)),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(o.x,o.y,o.width,o.height));else if(s.type===r.SHAPES.CIRC)e.beginPath(),e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(s.type===r.SHAPES.ELIP){var c=2*o.width,d=2*o.height,p=o.x-c/2,f=o.y-d/2;e.beginPath();var g=.5522848,v=c/2*g,m=d/2*g,y=p+c,x=f+d,b=p+c/2,T=f+d/2;e.moveTo(p,T),e.bezierCurveTo(p,T-m,b-v,f,b,f),e.bezierCurveTo(b+v,f,y,T-m,y,T),e.bezierCurveTo(y,T+m,b+v,x,b,x),e.bezierCurveTo(b-v,x,p,T+m,p,T),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===r.SHAPES.RREC){var _=o.x,w=o.y,E=o.width,S=o.height,A=o.radius,C=Math.min(E,S)/2|0;A=A>C?C:A,e.beginPath(),e.moveTo(_,w+A),e.lineTo(_,w+S-A),e.quadraticCurveTo(_,w+S,_+A,w+S),e.lineTo(_+E-A,w+S),e.quadraticCurveTo(_+E,w+S,_+E,w+S-A),e.lineTo(_+E,w+A),e.quadraticCurveTo(_+E,w,_+E-A,w),e.lineTo(_+A,w),e.quadraticCurveTo(_,w,_,w+A),e.closePath(),(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},i.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;i>n;n++){var s=t.graphicsData[n],o=s.shape;if(s.type===r.SHAPES.POLY){var a=o.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(s.type===r.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(s.type===r.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===r.SHAPES.ELIP){var l=2*o.width,u=2*o.height,c=o.x-l/2,d=o.y-u/2,p=.5522848,f=l/2*p,g=u/2*p,v=c+l,m=d+u,y=c+l/2,x=d+u/2;e.moveTo(c,x),e.bezierCurveTo(c,x-g,y-f,d,y,d),e.bezierCurveTo(y+f,d,v,x-g,v,x),e.bezierCurveTo(v,x+g,y+f,m,y,m),e.bezierCurveTo(y-f,m,c,x+g,c,x),e.closePath()}else if(s.type===r.SHAPES.RREC){var b=o.x,T=o.y,_=o.width,w=o.height,E=o.radius,S=Math.min(_,w)/2|0;E=E>S?S:E,e.moveTo(b,T+E),e.lineTo(b,T+w-E),e.quadraticCurveTo(b,T+w,b+E,T+w),e.lineTo(b+_-E,T+w),e.quadraticCurveTo(b+_,T+w,b+_,T+w-E),e.lineTo(b+_,T+E),e.quadraticCurveTo(b+_,T,b+_-E,T),e.lineTo(b+E,T),e.quadraticCurveTo(b,T,b,T+E),e.closePath()}}}},i.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,i=(255&t.tint)/255,n=0;n<t.graphicsData.length;n++){var s=t.graphicsData[n],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*r*255<<8)+(255&o)/255*i*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*i*255}}},{"../../../const":13}],37:[function(t,e){function r(){}var i=t("./CanvasGraphics");r.prototype.constructor=r,e.exports=r,r.prototype.pushMask=function(t,e){e.context.save();var r=t.alpha,n=t.worldTransform,s=e.resolution;e.context.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),i.renderGraphicsMask(t,e.context),e.context.clip(),t.worldAlpha=r},r.prototype.popMask=function(t){t.context.restore()}},{"./CanvasGraphics":36}],38:[function(t,e){var r=t("../../../utils"),i=e.exports={};i.getTintedTexture=function(t,e){var r=t.texture;e=i.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);if(r.tintCache=r.tintCache||{},r.tintCache[n])return r.tintCache[n];var s=i.canvas||document.createElement("canvas");if(i.tintMethod(r,e,s),i.convertTintToImage){var o=new Image;o.src=s.toDataURL(),r.tintCache[n]=o}else r.tintCache[n]=s,i.canvas=null;return s},i.tintWithMultiply=function(t,e,r){var i=r.getContext("2d"),n=t.crop;r.width=n.width,r.height=n.height,i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},i.tintWithOverlay=function(t,e,r){var i=r.getContext("2d"),n=t.crop;r.width=n.width,r.height=n.height,i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height)},i.tintWithPerPixel=function(t,e,i){var n=i.getContext("2d"),s=t.crop;i.width=s.width,i.height=s.height,n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var o=r.hex2rgb(e),a=o[0],h=o[1],l=o[2],u=n.getImageData(0,0,s.width,s.height),c=u.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=h,c[d+2]*=l;n.putImageData(u,0,0)},i.roundColor=function(t){var e=i.cacheStepsPerColorChannel,n=r.hex2rgb(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),r.rgb2hex(n)},i.cacheStepsPerColorChannel=8,i.convertTintToImage=!1,i.canUseMultiply=r.canUseNewCanvasBlendModes(),i.tintMethod=i.canUseMultiply?i.tintWithMultiply:i.tintWithPerPixel},{"../../../utils":66}],39:[function(t,e){function r(t,e,r){i.call(this,"WebGL",t,e,r),this.type=p.RENDERER_TYPE.WEBGL,this._boundUpdateTexture=this.updateTexture.bind(this),this._boundDestroyTexture=this.destroyTexture.bind(this),this._boundContextLost=this.handleContextLost.bind(this),this._boundContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this._boundContextLost,!1),this.view.addEventListener("webglcontextrestored",this._boundContextRestored,!1),this._contextOptions={alpha:this.transparent,antialias:r.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new n(this),this.maskManager=new s(this),this.stencilManager=new o(this),this.filterManager=new a(this),this.blendModeManager=new h(this),this.currentRenderTarget=this.renderTarget,this._tempDisplayObjectParent={worldTransform:new c.Matrix,worldAlpha:1},this.currentRenderer=new u(this),this.initPlugins(),this._initContext(),this._mapBlendModes()}var i=t("../SystemRenderer"),n=t("./managers/ShaderManager"),s=t("./managers/MaskManager"),o=t("./managers/StencilManager"),a=t("./managers/FilterManager"),h=t("./managers/BlendModeManager"),l=t("./utils/RenderTarget"),u=t("./utils/ObjectRenderer"),c=t("../../math"),d=t("../../utils"),p=t("../../const");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,d.pluginTarget.mixin(r),d.eventTarget.mixin(r.prototype),r.glContextId=0,d.pluginTarget.mixin(r),r.prototype._initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=r.glContextId++,t.id=this.glContextId,t.renderer=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new l(this.gl,this.width,this.height,null,!0),this.emit("context",t),this.resize(this.width,this.height)},r.prototype.render=function(t){if(!this.gl.isContextLost()){var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),this.clearBeforeRender&&(this.transparent?r.clearColor(0,0,0,0):r.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),r.clear(r.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget)}},r.prototype.renderDisplayObject=function(t,e){this.blendModeManager.setBlendMode(p.blendModes.NORMAL),this.setRenderTarget(e),this.drawCount=0,this.filterManager.begin(),t.renderWebGL(this),this.currentRenderer.flush()},r.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},r.prototype.setRenderTarget=function(t){this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack)},r.prototype.resize=function(t,e){i.prototype.resize.call(this,t,e),this.gl.viewport(0,0,this.width,this.height),this.filterManager.resize(t,e),this.renderTarget.resize(t,e)},r.prototype.updateTexture=function(t){if(t=t.baseTexture||t,t.hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this._boundUpdateTexture),t.on("dispose",this._boundDestroyTexture)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===p.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&d.isPowerOfTwo(t.width,t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===p.scaleModes.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===p.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},r.prototype.destroyTexture=function(t){t=t.baseTexture||t,t.hasLoaded&&t._glTextures[this.gl.id]&&this.gl.deleteTexture(t._glTextures[this.gl.id])},r.prototype.handleContextLost=function(t){t.preventDefault()},r.prototype.handleContextRestored=function(){this._initContext();for(var t in d.BaseTextureCache)d.BaseTextureCache[t]._glTextures={}},r.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this._boundContextLost),this.view.removeEventListener("webglcontextrestored",this._boundContextRestored),i.prototype.destroy.call(this,t),this.uuid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this._boundContextLost=null,this._boundContextRestored=null,this._contextOptions=null,this.drawCount=0,this.gl=null},r.prototype._mapBlendModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[p.blendModes.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[p.blendModes.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[p.blendModes.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[p.blendModes.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA])}},{"../../const":13,"../../math":23,"../../utils":66,"../SystemRenderer":33,"./managers/BlendModeManager":42,"./managers/FilterManager":43,"./managers/MaskManager":44,"./managers/ShaderManager":45,"./managers/StencilManager":46,"./utils/ObjectRenderer":52,"./utils/RenderTarget":54}],40:[function(t,e){function r(t,e,r){this.passes=[this],this.shaders=[],this.padding=0,this.uniforms=r||{},this.vertexSrc=t,this.fragmentSrc=e}var i=t("../shaders/TextureShader");r.prototype.constructor=r,e.exports=r,r.prototype.getShader=function(t){var e=t.gl,r=this.shaders[e.id];return r||(r=new i(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=r),r},r.prototype.applyFilter=function(t,e,r,i){var n=this.getShader(t);t.filterManager.applyFilter(n,e,r,i)},r.prototype.syncUniform=function(t){for(var e=0,r=this.shaders.length;r>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":51}],41:[function(t,e){function r(t){var e=new n.Matrix;i.call(this,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform mat3 otherMatrix;","varying vec2 vMaskCoord;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void)","{","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vMaskCoord;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform sampler2D mask;","void main(void)","{","   vec4 original =  texture2D(uSampler, vTextureCoord);","   vec4 masky =  texture2D(mask, vMaskCoord);","   original *= (masky.r * masky.a);","   gl_FragColor =  original;","}"].join("\n"),{mask:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var i=t("./AbstractFilter"),n=t("../../../math");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,r){var i=t.filterManager;i.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0);var n=this.getShader(t);i.applyFilter(n,e,r)},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":23,"./AbstractFilter":40}],42:[function(t,e){function r(t){i.call(this,t),this.currentBlendMode=99999}var i=t("./WebGLManager");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":47}],43:[function(t,e){function r(t){i.call(this,t),this.count=0,this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new o.Rectangle(0,0,t.width,t.height),this.currentFrame=null,this.tempMatrix=new o.Matrix}var i=t("./WebGLManager"),n=t("../utils/RenderTarget"),s=t("../utils/Quad"),o=t("../../../math");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new s(t)},r.prototype.begin=function(){this.filterStack[0].renderTarget=this.renderer.currentRenderTarget,this.filterStack[0].bounds=this.renderer.currentRenderTarget.size},r.prototype.pushFilter=function(t,e){var r=t.filterArea||t.getBounds();r.x=0|r.x,r.y=0|r.y,r.width=0|r.width,r.height=0|r.height,this.capFilterArea(r),this.currentFrame=r;var i=this.getRenderTarget();this.renderer.setRenderTarget(i),i.clear(),this.filterStack.push({renderTarget:i,filter:e})},r.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],r=t.renderTarget,i=e.renderTarget,n=this.renderer.gl;this.currentFrame=r.frame,this.quad.map(this.textureSize,r.frame),n.bindBuffer(n.ARRAY_BUFFER,this.quad.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var s=t.filter;if(1===s.length)s[0].uniforms.dimensions&&(s[0].uniforms.dimensions.value[0]=this.renderer.width,s[0].uniforms.dimensions.value[1]=this.renderer.height,s[0].uniforms.dimensions.value[2]=this.quad.vertices[0],s[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),s[0].applyFilter(this.renderer,r,i),this.returnRenderTarget(r);else{for(var o=r,a=this.getRenderTarget(!0),h=0;h<s.length-1;h++){var l=s[h];l.uniforms.dimensions&&(l.uniforms.dimensions.value[0]=this.renderer.width,l.uniforms.dimensions.value[1]=this.renderer.height,l.uniforms.dimensions.value[2]=this.quad.vertices[0],l.uniforms.dimensions.value[3]=this.quad.vertices[5]),l.applyFilter(this.renderer,o,a);var u=o;o=a,a=u}s[s.length-1].applyFilter(this.renderer,o,i),this.returnRenderTarget(o),this.returnRenderTarget(a)}return t.filter},r.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new n(this.renderer.gl,this.textureSize.width,this.textureSize.height);
return e.frame=this.currentFrame,t&&e.clear(),e},r.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},r.prototype.applyFilter=function(t,e,r,i){var n=this.renderer.gl;this.renderer.setRenderTarget(r),i&&r.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),n.vertexAttribPointer(t.attributes.aVertexPosition,2,n.FLOAT,!1,0,0),n.vertexAttribPointer(t.attributes.aTextureCoord,2,n.FLOAT,!1,0,32),n.vertexAttribPointer(t.attributes.aColor,4,n.FLOAT,!1,0,64),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0)},r.prototype.calculateMappedMatrix=function(t,e,r){var i=e.worldTransform.copy(o.Matrix.TEMP_MATRIX),n=e._texture.baseTexture,s=r.identity(),a=this.textureSize.height/this.textureSize.width;s.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),s.scale(1,a);var h=this.textureSize.width/n.width,l=this.textureSize.height/n.height;return i.tx/=n.width*h,i.ty/=n.width*h,i.invert(),s.prepend(i),s.scale(1,1/a),s.scale(h,l),s.translate(e.anchor.x,e.anchor.y),s},r.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},r.prototype.resize=function(t,e){for(var r=0;r<this.texturePool.length;r++)this.texturePool[r].resize(t,e)},r.prototype.destroy=function(){this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../math":23,"../utils/Quad":53,"../utils/RenderTarget":54,"./WebGLManager":47}],44:[function(t,e){function r(t){i.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var i=t("./WebGLManager"),n=t("../filters/SpriteMaskFilter");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},r.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},r.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool.pop();r||(r=[new n(e)]),this.renderer.filterManager.pushFilter(t,r)},r.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},r.prototype.pushStencilMask=function(t,e){this.renderer.currentRenderTarget.attachStenilBuffer(),this.renderer.stencilManager.pushMask(e)},r.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":41,"./WebGLManager":47}],45:[function(t,e){function r(t){i.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null,this.initPlugins()}var i=t("./WebGLManager"),n=t("../shaders/TextureShader"),s=t("../shaders/ComplexPrimitiveShader"),o=t("../shaders/PrimitiveShader"),a=t("../../../utils");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,a.pluginTarget.mixin(r),e.exports=r,r.prototype.onContextChange=function(){this.initPlugins(),this.defaultShader=new n(this),this.primitiveShader=new o(this),this.complexPrimitiveShader=new s(this)},r.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var r in t)this.tempAttribState[t[r]]=!0;var i=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?i.enableVertexAttribArray(e):i.disableVertexAttribArray(e))},r.prototype.setShader=function(t){return this._currentId===t.uuid?!1:(this._currentId=t.uuid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":66,"../shaders/ComplexPrimitiveShader":48,"../shaders/PrimitiveShader":49,"../shaders/TextureShader":51,"./WebGLManager":47}],46:[function(t,e){function r(t){i.call(this,t),this.stencilMaskStack=null}var i=t("./WebGLManager"),n=t("../../../utils");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},r.prototype.pushStencil=function(t,e){var r=this.renderer.gl,i=this.stencilMaskStack;this.bindGraphics(t,e,this.renderer),0===i.stencilStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),i.reverse=!0,i.count=0),i.stencilStack.push(e);var n=i.count;r.colorMask(!1,!1,!1,!1),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),1===e.mode?(r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),i.reverse?(r.stencilFunc(r.EQUAL,255-n,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),i.reverse?r.stencilFunc(r.EQUAL,255-(n+1),255):r.stencilFunc(r.EQUAL,n+1,255),i.reverse=!i.reverse):(i.reverse?(r.stencilFunc(r.EQUAL,n,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,255-n,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),i.reverse?r.stencilFunc(r.EQUAL,n+1,255):r.stencilFunc(r.EQUAL,255-(n+1),255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),i.count++},r.prototype.bindGraphics=function(t,e){this._currentGraphics=t;var r,i=this.renderer.gl;1===e.mode?(r=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(r),i.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),i.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform3fv(r.uniforms.tint._location,n.hex2rgb(t.tint)),i.uniform3fv(r.uniforms.color._location,e.color),i.uniform1f(r.uniforms.alpha._location,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,8,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(r=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(r),i.uniformMatrix3fv(r.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),i.uniformMatrix3fv(r.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform3fv(r.uniforms.tint._location,n.hex2rgb(t.tint)),i.uniform1f(r.uniforms.alpha._location,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,e.buffer),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(r.attributes.aColor,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},r.prototype.popStencil=function(t,e){var r=this.renderer.gl,i=this.stencilMaskStack;if(i.stencilStack.pop(),i.count--,0===i.stencilStack.length)r.disable(r.STENCIL_TEST);else{var n=i.count;this.bindGraphics(t,e,this.renderer),r.colorMask(!1,!1,!1,!1),1===e.mode?(i.reverse=!i.reverse,i.reverse?(r.stencilFunc(r.EQUAL,255-(n+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),r.drawElements(r.TRIANGLE_FAN,4,r.UNSIGNED_SHORT,2*(e.indices.length-4)),r.stencilFunc(r.ALWAYS,0,255),r.stencilOp(r.KEEP,r.KEEP,r.INVERT),r.drawElements(r.TRIANGLE_FAN,e.indices.length-4,r.UNSIGNED_SHORT,0),i.reverse?r.stencilFunc(r.EQUAL,n,255):r.stencilFunc(r.EQUAL,255-n,255)):(i.reverse?(r.stencilFunc(r.EQUAL,n+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)):(r.stencilFunc(r.EQUAL,255-(n+1),255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)),r.drawElements(r.TRIANGLE_STRIP,e.indices.length,r.UNSIGNED_SHORT,0),i.reverse?r.stencilFunc(r.EQUAL,n,255):r.stencilFunc(r.EQUAL,255-n,255)),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)}},r.prototype.destroy=function(){i.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},r.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)},r.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":66,"./WebGLManager":47}],47:[function(t,e){function r(t){this.renderer=t;var e=this;this.renderer.on("context",this._onContextChangeFn=function(){e.onContextChange()})}r.prototype.constructor=r,e.exports=r,r.prototype.onContextChange=function(){},r.prototype.destroy=function(){this.renderer.off("context",this._onContextChangeFn),this.renderer=null}},{}],48:[function(t,e){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var i=t("./Shader");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},{"./Shader":50}],49:[function(t,e){function r(t){i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var i=t("./Shader");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},{"./Shader":50}],50:[function(t,e){function r(t,e,r,n,s){if(!e||!r)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uuid=i.uuid(),this.gl=t.renderer.gl,this.program=null,this.uniforms=n||{},this.attributes=s||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=r,this.init()}var i=t("../../../utils"),n=t("../../../const");r.prototype.constructor=r,e.exports=r,r.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},r.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},r.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},r.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),r=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),i=t.createProgram();return t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||(window.console.error("Pixi.js Error: Could not initialize shader."),window.console.error("gl.VALIDATE_STATUS",t.getProgramParameter(i,t.VALIDATE_STATUS)),window.console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(i)&&window.console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(i)),t.deleteProgram(i),i=null),t.deleteShader(e),t.deleteShader(r),this.program=i},r.prototype.syncUniform=function(t){var e,r,n=t._location,s=t.value,o=this.gl;switch(t.type){case"i":case"1i":o.uniform1i(n,s);break;case"f":case"1f":o.uniform1f(n,s);break;case"2f":o.uniform2f(n,s[0],s[1]);break;case"3f":o.uniform3f(n,s[0],s[1],s[2]);break;case"4f":o.uniform4f(n,s[0],s[1],s[2],s[3]);break;case"v2":o.uniform2f(n,s.x,s.y);break;case"v3":o.uniform3f(n,s.x,s.y,s.z);break;case"v4":o.uniform4f(n,s.x,s.y,s.z,s.w);break;case"1iv":o.uniform1iv(n,s);break;case"2iv":o.uniform2iv(n,s);break;case"3iv":o.uniform3iv(n,s);break;case"4iv":o.uniform4iv(n,s);break;case"1fv":o.uniform1fv(n,s);break;case"2fv":o.uniform2fv(n,s);break;case"3fv":o.uniform3fv(n,s);break;case"4fv":o.uniform4fv(n,s);break;case"m2":case"mat2":case"Matrix2fv":o.uniformMatrix2fv(n,t.transpose,s);break;case"m3":case"mat3":case"Matrix3fv":o.uniformMatrix3fv(n,t.transpose,s);break;case"m4":case"mat4":case"Matrix4fv":o.uniformMatrix4fv(n,t.transpose,s);break;case"c":"number"==typeof s&&(s=i.hex2rgb(s)),o.uniform3f(n,s[0],s[1],s[2]);break;case"iv1":o.uniform1iv(n,s);break;case"iv":o.uniform3iv(n,s);break;case"fv1":o.uniform1fv(n,s);break;case"fv":o.uniform3fv(n,s);break;case"v2v":for(t._array||(t._array=new Float32Array(2*s.length)),e=0,r=s.length;r>e;++e)t._array[2*e]=s[e].x,t._array[2*e+1]=s[e].y;o.uniform2fv(n,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*s.length)),e=0,r=s.length;r>e;++e)t._array[3*e]=s[e].x,t._array[3*e+1]=s[e].y,t._array[3*e+2]=s[e].z;o.uniform3fv(n,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*s.length)),e=0,r=s.length;r>e;++e)t._array[4*e]=s[e].x,t._array[4*e+1]=s[e].y,t._array[4*e+2]=s[e].z,t._array[4*e+3]=s[e].w;o.uniform4fv(n,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;o.activeTexture(o["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[o.id];a||this.initSampler2D(t),o.bindTexture(o.TEXTURE_2D,t.value.baseTexture._glTextures[o.id]),o.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:window.console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},r.prototype.syncUniforms=function(){this.textureCount=1;for(var t in this.uniforms)this.syncUniform(this.uniforms[t])},r.prototype.initSampler2D=function(t){var e=this.gl,r=t.value.baseTexture;if(r._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,r._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultipliedAlpha),t.textureData){var i=t.textureData;e.texImage2D(e.TEXTURE_2D,0,i.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i.magFilter?i.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i.wrapS?i.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,i.wrapS?i.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,i.wrapT?i.wrapT:e.CLAMP_TO_EDGE)}else e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},r.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},r.prototype._glCompile=function(t,e){var r=this.gl.createShader(t);return this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(window.console.log(this.gl.getShaderInfoLog(r)),null)}},{"../../../const":13,"../../../utils":66}],51:[function(t,e){function r(t,e,r,n,s){var o={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array(1,0,0,0,1,0,0,0,1)}};if(n)for(var a in n)o[a]=n[a];var h={aVertexPosition:0,aTextureCoord:0,aColor:0};if(s)for(var l in s)h[l]=s[l];e=e||["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),r=r||["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n"),i.call(this,t,e,r,o,h)}var i=t("./Shader");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r},{"./Shader":50}],52:[function(t,e){function r(t){i.call(this,t)}var i=t("../managers/WebGLManager");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.start=function(){},r.prototype.stop=function(){this.flush()},r.prototype.flush=function(){},r.prototype.render=function(){}},{"../managers/WebGLManager":47}],53:[function(t,e){function r(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}r.prototype.constructor=r,r.prototype.map=function(t,e){var r=0,i=0;this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this.upload()},r.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},e.exports=r},{}],54:[function(t,e){var r=t("../../../math"),i=t("../../../const"),n=t("./StencilMaskStack"),s=function(t,e,s,o,a,h){this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new r.Rectangle(0,0,1,1),this.resolution=1,this.projectionMatrix=new r.Matrix,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new n,this.scaleMode=o||i.scaleModes.DEFAULT,this.root=a,this.root||(this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,o===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)),this.resize(e,s),h&&this.attachStenilBuffer()};s.prototype.constructor=s,e.exports=s,s.prototype.clear=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},s.prototype.attachStenilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},s.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),t.viewport(0,0,e.width,e.height)},s.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},s.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var r=this.gl;r.bindTexture(r.TEXTURE_2D,this.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,t,e,0,r.RGBA,r.UNSIGNED_BYTE,null),this.stencilBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencilBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))}var i=this.frame||this.size;this.calculateProjection(i)}},s.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":13,"../../../math":23,"./StencilMaskStack":55}],55:[function(t,e){function r(){this.stencilStack=[],this.reverse=!0,this.count=0}r.prototype.constructor=r,e.exports=r},{}],56:[function(t,e){function r(t){s.call(this),this.anchor=new i.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=h.blendModes.NORMAL,this.shader=null,this.renderable=!0,this.cachedTint=16777215,this.texture=t||n.EMPTY}var i=t("../math"),n=t("../textures/Texture"),s=t("../display/Container"),o=t("../renderers/canvas/utils/CanvasTinter"),a=t("../utils"),h=t("../const");r.prototype.destroy=function(t,e){s.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},r.prototype=Object.create(s.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}},height:{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate.bind(this))))}}}),r.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},r.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},r.prototype.getBounds=function(t){var e,r,i,n,s=this.texture.frame.width,o=this.texture.frame.height,a=s*(1-this.anchor.x),h=s*-this.anchor.x,l=o*(1-this.anchor.y),u=o*-this.anchor.y,c=t||this.worldTransform,d=c.a,p=c.b,f=c.c,g=c.d,v=c.tx,m=c.ty;if(0===p&&0===f)0>d&&(d*=-1),0>g&&(g*=-1),e=d*h+v,r=d*a+v,i=g*u+m,n=g*l+m;else{var y=d*h+f*u+v,x=g*u+p*h+m,b=d*a+f*u+v,T=g*u+p*a+m,_=d*a+f*l+v,w=g*l+p*a+m,E=d*h+f*l+v,S=g*l+p*h+m;e=y,e=e>b?b:e,e=e>_?_:e,e=e>E?E:e,i=x,i=i>T?T:i,i=i>w?w:i,i=i>S?S:i,r=y,r=b>r?b:r,r=_>r?_:r,r=E>r?E:r,n=x,n=T>n?T:n,n=w>n?w:n,n=S>n?S:n}var A=this._bounds;return A.x=e,A.width=r-e,A.y=i,A.height=n-i,this._currentBounds=A,A},r.prototype.renderCanvas=function(t){if(!(!this.visible||this.alpha<=0||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.blendModes[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.currentScaleMode!==this.texture.baseTexture.scaleMode&&(t.currentScaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.currentScaleMode===h.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture._frame.width,i=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture._frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),r=0|r,i=0|i):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=o.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,r/e,i/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var n=0,s=this.children.length;s>n;n++)this.children[n].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},r.fromFrame=function(t){var e=a.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new r(e)},r.fromImage=function(t,e,i){return new r(n.fromImage(t,e,i))}},{"../const":13,"../display/Container":14,"../math":23,"../renderers/canvas/utils/CanvasTinter":38,"../textures/Texture":60,"../utils":66}],57:[function(t,e){function r(t){i.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=o.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,r=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(r),this.lastIndexCount=0;for(var n=0,s=0;r>n;n+=6,s+=4)this.indices[n+0]=s+0,this.indices[n+1]=s+1,this.indices[n+2]=s+2,this.indices[n+3]=s+0,this.indices[n+4]=s+2,this.indices[n+5]=s+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.shader=null}var i=t("../../renderers/webgl/utils/ObjectRenderer"),n=t("../../renderers/webgl/shaders/Shader"),s=t("../../renderers/webgl/WebGLRenderer"),o=t("../../const");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,s.registerPlugin("sprite",r),r.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},r.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture);var r=e._uvs;if(r){var i,n,s,o,a=t.anchor.x,h=t.anchor.y;if(e.trim){var l=e.trim;n=l.x-a*l.width,i=n+e.crop.width,o=l.y-h*l.height,s=o+e.crop.height}else i=e._frame.width*(1-a),n=e._frame.width*-a,s=e._frame.height*(1-h),o=e._frame.height*-h;var u=this.currentBatchSize*this.vertByteSize,c=e.baseTexture.resolution,d=t.worldTransform,p=d.a/c,f=d.b/c,g=d.c/c,v=d.d/c,m=d.tx,y=d.ty,x=this.colors,b=this.positions;this.renderer.roundPixels?(b[u]=p*n+g*o+m|0,b[u+1]=v*o+f*n+y|0,b[u+5]=p*i+g*o+m|0,b[u+6]=v*o+f*i+y|0,b[u+10]=p*i+g*s+m|0,b[u+11]=v*s+f*i+y|0,b[u+15]=p*n+g*s+m|0,b[u+16]=v*s+f*n+y|0):(b[u]=p*n+g*o+m,b[u+1]=v*o+f*n+y,b[u+5]=p*i+g*o+m,b[u+6]=v*o+f*i+y,b[u+10]=p*i+g*s+m,b[u+11]=v*s+f*i+y,b[u+15]=p*n+g*s+m,b[u+16]=v*s+f*n+y),b[u+2]=r.x0,b[u+3]=r.y0,b[u+7]=r.x1,b[u+8]=r.y1,b[u+12]=r.x2,b[u+13]=r.y2,b[u+17]=r.x3,b[u+18]=r.y3;var T=t.tint;x[u+4]=x[u+9]=x[u+14]=x[u+19]=(T>>16)+(65280&T)+((255&T)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},r.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var r=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,r)}for(var i,s,o,a,h=0,l=0,u=null,c=this.renderer.blendModeManager.currentBlendMode,d=null,p=!1,f=!1,g=0,v=this.currentBatchSize;v>g;g++)a=this.sprites[g],i=a._texture.baseTexture,s=a.blendMode,o=a.shader||this.shader,p=c!==s,f=d!==o,(u!==i||p||f)&&(this.renderBatch(u,h,l),l=g,h=0,u=i,p&&(c=s,this.renderer.blendModeManager.setBlendMode(c)),f&&(d=o,t=d.shaders?d.shaders[e.id]:d,t||(t=new n(this.renderer.shaderManager,null,d.fragmentSrc,d.uniforms),d.shaders[e.id]=t),this.renderer.shaderManager.setShader(t),e.uniformMatrix3fv(t.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)))),h++;this.renderBatch(u,h,l),this.currentBatchSize=0}},r.prototype.renderBatch=function(t,e,r){if(0!==e){var i=this.renderer.gl;t._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,t._glTextures[i.id]):this.renderer.updateTexture(t),i.drawElements(i.TRIANGLES,6*e,i.UNSIGNED_SHORT,6*r*2),this.renderer.drawCount++}},r.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},r.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.currentBaseTexture=null,this.drawing=!1,this.textures=null,this.blendModes=null,this.shaders=null,this.sprites=null,this.shader=null}},{"../../const":13,"../../renderers/webgl/WebGLRenderer":39,"../../renderers/webgl/shaders/Shader":50,"../../renderers/webgl/utils/ObjectRenderer":52}],58:[function(t,e){function r(t,e){this.uuid=i.uuid(),this.resolution=1,this.width=100,this.height=100,this.scaleMode=e||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this._powerOf2=!1,this.mipmap=!1,this._glTextures={},this._needsUpdate=!1,t&&this.loadSource(t)}var i=t("../utils"),n=t("../const");r.prototype.constructor=r,e.exports=r,i.eventTarget.mixin(r.prototype),Object.defineProperties(r.prototype,{needsUpdate:{get:function(){return this._needsUpdate},set:function(t){this._needsUpdate=t,t&&this.emit("update",this)}}}),r.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var r=this;t.onload=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),r.emit("loaded",r))},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},r.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.needsUpdate=!0
},r.prototype.destroy=function(){this.imageUrl?(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},r.fromImage=function(t,e,s){var o=i.BaseTextureCache[t];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var a=new Image;e&&(a.crossOrigin=""),o=new r(a,s),o.imageUrl=t,a.src=t,i.BaseTextureCache[t]=o,-1!==t.indexOf(n.RETINA_PREFIX+".")&&(o.resolution=2)}return o},r.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.uuid());var n=i.BaseTextureCache[t._pixiId];return n||(n=new r(t,e),i.BaseTextureCache[t._pixiId]=n),n}},{"../const":13,"../utils":66}],59:[function(t,e){function r(t,e,r,l,u){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,r=r||100,u=u||1;var c=new i;if(c.width=e*u,c.height=r*u,c._glTextures=[],c.resolution=u,c.scaleMode=l||h.scaleModes.DEFAULT,c.hasLoaded=!0,n.call(this,c,new a.Rectangle(0,0,e,r)),this.width=e,this.height=r,this.resolution=u,this.render=null,this.renderer=t,this.renderer.type===h.RENDERER_TYPE.WEBGL){var d=this.renderer.gl;this.textureBuffer=new s(d,this.width*this.resolution,this.height*this.resolution),this.baseTexture._glTextures[d.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new a.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new o(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var i=t("./BaseTexture"),n=t("./Texture"),s=t("../renderers/webgl/utils/RenderTarget"),o=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../math"),h=t("../const");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.resize=function(t,e,r){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=this._frame.width=this.crop.width=t,this.height=this._frame.height=this.crop.height=e,r&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===h.RENDERER_TYPE.WEBGL&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},r.prototype.clear=function(){this.valid&&(this.renderer.type===h.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},r.prototype.renderWebGL=function(t,e,r,i){if(this.valid){"undefined"==typeof i&&(i=!0);var n,s;i&&(n=t.worldAlpha,s=t.worldTransform.toArray());var o=t.worldTransform;o.identity(),e&&o.append(e),t.worldAlpha=1;var a,h,l=t.children;for(a=0,h=l.length;h>a;++a)l[a].updateTransform();var u=this.renderer.gl;if(u.viewport(0,0,this.width*this.resolution,this.height*this.resolution),u.bindFramebuffer(u.FRAMEBUFFER,this.textureBuffer.frameBuffer),r&&this.textureBuffer.clear(),this.renderer.renderDisplayObject(t,this.textureBuffer),i)for(t.worldAlpha=n,t.worldTransform.fromArray(s),a=0,h=l.length;h>a;++a)l[a].updateTransform()}},r.prototype.renderCanvas=function(t,e,r){if(this.valid){var i=t.worldTransform;i.identity(),e&&i.append(e),t.worldAlpha=1;var n,s,o=t.children;for(n=0,s=o.length;s>n;++n)o[n].updateTransform();r&&this.textureBuffer.clear();var a=this.textureBuffer.context,h=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,a),this.renderer.resolution=h}},r.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},r.prototype.getBase64=function(){return this.getCanvas().toDataURL()},r.prototype.getCanvas=function(){if(this.renderer.type===h.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.width,r=this.textureBuffer.height,i=new Uint8Array(4*e*r);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,r,t.RGBA,t.UNSIGNED_BYTE,i),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new o(e,r),s=n.context.getImageData(0,0,e,r);return s.data.set(i),n.context.putImageData(s,0,0),n.canvas}return this.textureBuffer.canvas}},{"../const":13,"../math":23,"../renderers/canvas/utils/CanvasBuffer":35,"../renderers/webgl/utils/RenderTarget":54,"./BaseTexture":58,"./Texture":60}],60:[function(t,e){function r(t,e,i,n){this.noFrame=!1,e||(this.noFrame=!0,e=new a.Rectangle(0,0,1,1)),t instanceof r&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||new a.Rectangle(0,0,1,1),t.hasLoaded?(this.noFrame&&(e=new a.Rectangle(0,0,t.width,t.height)),this.frame=e):t.addEventListener("loaded",this.onBaseTextureLoaded.bind(this))}var i=t("./BaseTexture"),n=t("./VideoBaseTexture"),s=t("./TextureUvs"),o=t("../utils/eventTarget"),a=t("../math"),h=t("../utils");r.prototype.constructor=r,e.exports=r,o.mixin(r.prototype),Object.defineProperties(r.prototype,{needsUpdate:{get:function(){return this.baseTexture.needsUpdate},set:function(t){this.baseTexture.needsUpdate=t}},frame:{get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height),this.valid&&this._updateUvs()}}}),r.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.frame=this.noFrame?new a.Rectangle(0,0,t.width,t.height):this._frame,this.dispatchEvent({type:"update",content:this})},r.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},r.prototype._updateUvs=function(){this._uvs||(this._uvs=new s);var t=this.crop,e=this.baseTexture.width,r=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/r,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/r,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/r,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/r},r.fromImage=function(t,e,n){var s=h.TextureCache[t];return s||(s=new r(i.fromImage(t,e,n)),h.TextureCache[t]=s),s},r.fromCanvas=function(t,e){return new r(i.fromCanvas(t,e))},r.fromVideo=function(t,e){return new r(n.baseTextureFromVideo(t,e))},r.addTextureToCache=function(t,e){h.TextureCache[e]=t},r.removeTextureFromCache=function(t){var e=h.TextureCache[t];return delete h.TextureCache[t],delete h.BaseTextureCache[t],e},r.emptyTexture=new r(new i)},{"../math":23,"../utils":66,"../utils/eventTarget":65,"./BaseTexture":58,"./TextureUvs":61,"./VideoBaseTexture":62}],61:[function(t,e){function r(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}e.exports=r},{}],62:[function(t,e){function r(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),n.call(this,t,e),this.autoUpdate=!1,this._boundOnUpdate=this._onUpdate.bind(this),this._boundOnCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._boundOnCanPlay),t.addEventListener("canplaythrough",this._boundOnCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function i(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=t,r.type=e,r}var n=t("./BaseTexture"),s=t("../utils");r.prototype=Object.create(n.prototype),r.prototype.constructor=r,e.exports=r,r.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._boundOnUpdate),this.needsUpdate=!0)},r.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._boundOnUpdate),this.autoUpdate=!0)},r.prototype._onPlayStop=function(){this.autoUpdate=!1},r.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._boundOnCanPlay),this.source.removeEventListener("canplaythrough",this._boundOnCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},r.prototype.destroy=function(){this.source&&this.source._pixiId&&(s.BaseTextureCache[this.source._pixiId]=null,delete s.BaseTextureCache[this.source._pixiId],this.source._pixiId=null,delete this.source._pixiId),n.prototype.destroy.call(this)},r.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+s.uuid());var i=s.BaseTextureCache[t._pixiId];return i||(i=new r(t,e),s.BaseTextureCache[t._pixiId]=i),i},r.fromUrl=function(t,e){var n=document.createElement("video");if(Array.isArray(t))for(var s=0;s<t.length;++s)n.appendChild(i(t.src||t,t.mime));else n.appendChild(i(t.src||t,t.mime));return n.load(),n.play(),r.textureFromVideo(n,e)},r.fromUrls=r.fromUrl},{"../utils":66,"./BaseTexture":58}],63:[function(t,e){function r(t,e,r){this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=e,this.data=r,this.timeStamp=Date.now()}r.prototype.constructor=r,e.exports=r,r.prototype.stopPropagation=function(){this.stopped=!0},r.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0}},{}],64:[function(t,e){var r=e.exports={};r.Triangulate=function(t){var e=!0,i=t.length>>1;if(3>i)return[];for(var n=[],s=[],o=0;i>o;o++)s.push(o);o=0;for(var a=i;a>3;){var h=s[(o+0)%a],l=s[(o+1)%a],u=s[(o+2)%a],c=t[2*h],d=t[2*h+1],p=t[2*l],f=t[2*l+1],g=t[2*u],v=t[2*u+1],m=!1;if(r._convex(c,d,p,f,g,v,e)){m=!0;for(var y=0;a>y;y++){var x=s[y];if(x!==h&&x!==l&&x!==u&&r._PointInTriangle(t[2*x],t[2*x+1],c,d,p,f,g,v)){m=!1;break}}}if(m)n.push(h,l,u),s.splice((o+1)%a,1),a--,o=0;else if(o++>3*a){if(!e)return null;for(n=[],s=[],o=0;i>o;o++)s.push(o);o=0,a=i,e=!1}}return n.push(s[0],s[1],s[2]),n},r._PointInTriangle=function(t,e,r,i,n,s,o,a){var h=o-r,l=a-i,u=n-r,c=s-i,d=t-r,p=e-i,f=h*h+l*l,g=h*u+l*c,v=h*d+l*p,m=u*u+c*c,y=u*d+c*p,x=1/(f*m-g*g),b=(m*v-g*y)*x,T=(f*y-g*v)*x;return b>=0&&T>=0&&1>b+T},r._convex=function(t,e,r,i,n,s,o){return(e-i)*(n-r)+(r-t)*(s-i)>=0===o}},{}],65:[function(t,e){function r(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,e){if(this._listeners=this._listeners||{},this._listeners[t]){"object"==typeof t&&(e=t,t=t.type),e&&e.__isEventObject===!0||(e=new i(this,t,e));var r,n=this._listeners[t].slice(0),s=n.length,o=n[0];for(r=0;s>r;o=n[++r])if(o.call(this,e),e.stoppedImmediate)return this;return e.stopped?this:(this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,e),this)}},t.on=t.addEventListener=function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},t.once=function(t,e){function r(){e.apply(i.off(t,r),arguments)}this._listeners=this._listeners||{};var i=this;return r._originalHandler=e,this.on(t,r)},t.off=t.removeEventListener=function(t,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var r=this._listeners[t],i=e?r.length:0;i-->0;)(r[i]===e||r[i]._originalHandler===e)&&r.splice(i,1);return 0===r.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?(delete this._listeners[t],this):this}}var i=t("./EventData");e.exports={mixin:function(t){r(t)}}},{"./EventData":63}],66:[function(t,e){var r=t("../const"),i=e.exports={_uid:0,_saidHello:!1,PolyK:t("./PolyK"),EventData:t("./EventData"),eventTarget:t("./eventTarget"),pluginTarget:t("./pluginTarget"),uuid:function(){return++i._uid},hex2rgb:function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t=document.createElement("canvas"),e=t.getContext("2d");return t.width=1,t.height=1,e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},getNextPowerOfTwo:function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)},sayHello:function(t){if(!i._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["%c %c %c Pixi.js "+r.VERSION+" - "+t+"  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ ","background: #ff66a5","background: #ff66a5","color: #ff66a5; background: #030307;","background: #ff66a5","background: #ffc3dc","background: #ff66a5","color: #ff2424; background: #fff","color: #ff2424; background: #fff","color: #ff2424; background: #fff"];console.log.apply(console,e)}else window.console&&console.log("Pixi.js "+r.VERSION+" - "+t+" - http://www.pixijs.com/");i._saidHello=!0}},TextureCache:{},BaseTextureCache:{}}},{"../const":13,"./EventData":63,"./PolyK":64,"./eventTarget":65,"./pluginTarget":67}],67:[function(t,e){function r(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.exports={mixin:function(t){r(t)}}},{}],68:[function(t){function e(t){r.Sprite.call(this,t[0]),this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this.currentFrame=0,this.playing=!1}var r=t("../core");e.prototype=Object.create(r.Sprite.prototype),e.prototype.constructor=e,Object.defineProperties(e.prototype,{totalFrames:{get:function(){return this.textures.length}}}),e.prototype.stop=function(){this.playing=!1},e.prototype.play=function(){this.playing=!0},e.prototype.gotoAndStop=function(t){this.playing=!1,this.currentFrame=t;var e=Math.round(this.currentFrame);this.setTexture(this.textures[e%this.textures.length])},e.prototype.gotoAndPlay=function(t){this.currentFrame=t,this.playing=!0},e.prototype.updateTransform=function(){if(this.containerUpdateTransform(),this.playing){this.currentFrame+=this.animationSpeed;var t=Math.round(this.currentFrame);0>t?this.loop?(this.currentFrame+=this.textures.length,this.texture=this.textures[this.currentFrame]):(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this.loop||t<this.textures.length?this.texture=this.textures[t%this.textures.length]:t>=this.textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())}},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(new r.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(new r.Texture.fromImage(t[n]));return new e(i)}},{"../core":20}],69:[function(t,e){function r(t,e){i.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this.refresh()}var i=t("./Strip");r.prototype=Object.create(i.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.refresh=function(){var t=this.points;if(!(t.length<1)){var e=this.uvs,r=this.indices,i=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var n,s,o,a=t.length,h=1;a>h;h++)n=t[h],s=4*h,o=h/(a-1),h%2?(e[s]=o,e[s+1]=0,e[s+2]=o,e[s+3]=1):(e[s]=o,e[s+1]=0,e[s+2]=o,e[s+3]=1),s=2*h,i[s]=1,i[s+1]=1,s=2*h,r[s]=s,r[s+1]=s+1}},r.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,r,i,n,s,o,a=t[0],h=0,l=0,u=this.vertices,c=t.length,d=0;c>d;d++)r=t[d],i=4*d,e=d<t.length-1?t[d+1]:r,l=-(e.x-a.x),h=e.y-a.y,n=10*(1-d/(c-1)),n>1&&(n=1),s=Math.sqrt(h*h+l*l),o=this.texture.height/2,h/=s,l/=s,h*=o,l*=o,u[i]=r.x+h,u[i+1]=r.y+l,u[i+2]=r.x-h,u[i+3]=r.y-l,a=r;this.containerUpdateTransform()}},r.prototype.setTexture=function(t){this.texture=t}},{"./Strip":70}],70:[function(t,e){function r(t){i.Container.call(this),this.texture=t,this.uvs=new Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new Float32Array([0,0,100,0,100,100,0,100]),this.colors=new Float32Array([1,1,1,1]),this.indices=new Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=i.CONST.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=r.DrawModes.TRIANGLE_STRIP}var i=t("../core");r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.renderWebGL=function(t){!this.visible||this.alpha<=0||!this.renderable||(t.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(t),t.shaderManager.setShader(t.shaderManager.plugins.stripShader),this._renderStrip(t),t.spriteBatch.start())},r.prototype._initWebGL=function(t){var e=t.gl;this._vertexBuffer=e.createBuffer(),this._indexBuffer=e.createBuffer(),this._uvBuffer=e.createBuffer(),this._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this._colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colors,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)},r.prototype._renderStrip=function(t){var e=t.gl,i=t.projection,n=t.offset,s=t.shaderManager.plugins.stripShader,o=this.drawMode===r.DrawModes.TRIANGLE_STRIP?e.TRIANGLE_STRIP:e.TRIANGLES;t.blendModeManager.setBlendMode(this.blendMode),e.uniformMatrix3fv(s.translationMatrix,!1,this.worldTransform.toArray(!0)),e.uniform2f(s.projectionVector,i.x,-i.y),e.uniform2f(s.offsetVector,-n.x,-n.y),e.uniform1f(s.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW),e.vertexAttribPointer(s.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvs,e.STATIC_DRAW),e.vertexAttribPointer(s.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW)):(e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.vertexAttribPointer(s.aVertexPosition,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this._uvBuffer),e.vertexAttribPointer(s.aTextureCoord,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),this.texture.baseTexture._dirty[e.id]?t.updateTexture(this.texture.baseTexture):e.bindTexture(e.TEXTURE_2D,this.texture.baseTexture._glTextures[e.id]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),e.drawElements(o,this.indices.length,e.UNSIGNED_SHORT,0)},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.drawMode===r.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(e):this._renderCanvasTriangles(e)}},r.prototype._renderCanvasTriangleStrip=function(t){for(var e=this.vertices,r=this.uvs,i=e.length/2,n=0;i-2>n;n++){var s=2*n;this._renderCanvasDrawTriangle(t,e,r,s,s+2,s+4)}},r.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,r=this.uvs,i=this.indices,n=i.length,s=0;n>s;s+=3){var o=2*i[s],a=2*i[s+1],h=2*i[s+2];this._renderCanvasDrawTriangle(t,e,r,o,a,h)}},r.prototype._renderCanvasDrawTriangle=function(t,e,r,i,n,s){var o=this.texture.baseTexture.source,a=this.texture.width,h=this.texture.height,l=e[i],u=e[n],c=e[s],d=e[i+1],p=e[n+1],f=e[s+1],g=r[i]*a,v=r[n]*a,m=r[s]*a,y=r[i+1]*h,x=r[n+1]*h,b=r[s+1]*h;if(this.canvasPadding>0){var T=this.canvasPadding/this.worldTransform.a,_=this.canvasPadding/this.worldTransform.d,w=(l+u+c)/3,E=(d+p+f)/3,S=l-w,A=d-E,C=Math.sqrt(S*S+A*A);l=w+S/C*(C+T),d=E+A/C*(C+_),S=u-w,A=p-E,C=Math.sqrt(S*S+A*A),u=w+S/C*(C+T),p=E+A/C*(C+_),S=c-w,A=f-E,C=Math.sqrt(S*S+A*A),c=w+S/C*(C+T),f=E+A/C*(C+_)}t.save(),t.beginPath(),t.moveTo(l,d),t.lineTo(u,p),t.lineTo(c,f),t.closePath(),t.clip();var R=g*x+y*m+v*b-x*m-y*v-g*b,M=l*x+y*c+u*b-x*c-y*u-l*b,F=g*u+l*m+v*c-u*m-l*v-g*c,P=g*x*c+y*u*m+l*v*b-l*x*m-y*v*c-g*u*b,O=d*x+y*f+p*b-x*f-y*p-d*b,D=g*p+d*m+v*f-p*m-d*v-g*f,B=g*x*f+y*p*m+d*v*b-d*x*m-y*v*f-g*p*b;t.transform(M/R,O/R,F/R,D/R,P/R,B/R),t.drawImage(o,0,0),t.restore()},r.prototype.renderStripFlat=function(t){var e=this.context,r=t.vertices,i=r.length/2;e.beginPath();for(var n=1;i-2>n;n++){var s=2*n,o=r[s],a=r[s+2],h=r[s+4],l=r[s+1],u=r[s+3],c=r[s+5];e.moveTo(o,l),e.lineTo(a,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},r.prototype.onTextureUpdate=function(){this.updateFrame=!0},r.prototype.getBounds=function(t){for(var e=t||this.worldTransform,r=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,h=e.ty,l=-1/0,u=-1/0,c=1/0,d=1/0,p=this.vertices,f=0,g=p.length;g>f;f+=2){var v=p[f],m=p[f+1],y=r*v+s*m+a,x=o*m+n*v+h;c=c>y?y:c,d=d>x?x:d,l=y>l?y:l,u=x>u?x:u}if(c===-1/0||1/0===u)return i.math.Rectangle.EMPTY;var b=this._bounds;return b.x=c,b.width=l-c,b.y=d,b.height=u-d,this._currentBounds=b,b},r.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1}},{"../core":20}],71:[function(t,e){function r(t){i.Shader.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void){","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision mediump float;","uniform float alpha;","uniform sampler2D uSampler;","varying vec2 vTextureCoord;","void main(void){","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)}})}var i=t("../core");r.prototype=Object.create(i.Shader.prototype),r.prototype.constructor=r,e.exports=r},{"../core":20}],72:[function(t,e){function r(t,e,r){i.Sprite.call(this,t),this._width=e||100,this._height=r||100,this.tileScale=new i.math.Point(1,1),this.tileScaleOffset=new i.math.Point(1,1),this.tilePosition=new i.math.Point(0,0),this.blendMode=i.CONST.blendModes.NORMAL,this.tilingTexture=null,this._refreshTexture=!1,this._uvs=new n}var i=t("../core"),n=t("../core/textures/TextureUvs");r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),r.prototype._onTextureUpdate=function(){i.Sprite.prototype._onTextureUpdate.call(this),this._refreshTexture=!0},r.prototype._renderWebGL=function(t){if(!this.tilingTexture||this._refreshTexture)this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(t.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1);else{var e=this.tilingTexture,r=this._uvs;this.tilePosition.x%=e.baseTexture.width*this.tileScaleOffset.x,this.tilePosition.y%=e.baseTexture.height*this.tileScaleOffset.y;var i=this.tilePosition.x/(e.baseTexture.width*this.tileScaleOffset.x),n=this.tilePosition.y/(e.baseTexture.height*this.tileScaleOffset.y),s=this.width/e.baseTexture.width/(this.tileScale.x*this.tileScaleOffset.x),o=this.height/e.baseTexture.height/(this.tileScale.y*this.tileScaleOffset.y);r.x0=0-i,r.y0=0-n,r.x1=1*s-i,r.y1=0-n,r.x2=1*s-i,r.y2=1*o-n,r.x3=0-i,r.y3=1*o-n;var a=e._uvs,h=e._frame.width,l=e._frame.height;e._uvs=r,e._frame.width=this.width,e._frame.height=this.height,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=a,e._frame.width=h,e._frame.height=l}},r.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,t),e.globalAlpha=this.worldAlpha;var r,i,n=this.worldTransform,s=t.resolution;if(e.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),!this.__tilePattern||this._refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=t.blendModes[t.currentBlendMode]);var o=this.tilePosition,a=this.tileScale;for(o.x%=this.tilingTexture.baseTexture.width,o.y%=this.tilingTexture.baseTexture.height,e.scale(a.x,a.y),e.translate(o.x+this.anchor.x*-this._width,o.y+this.anchor.y*-this._height),e.fillStyle=this.__tilePattern,e.fillRect(-o.x,-o.y,this._width/a.x,this._height/a.y),e.translate(-o.x+this.anchor.x*this._width,-o.y+this.anchor.y*this._height),e.scale(1/a.x,1/a.y),this._mask&&t.maskManager.popMask(t),r=0,i=this.children.length;i>r;++r)this.children[r].renderCanvas(t)}},r.prototype.getBounds=function(){var t,e,r,i,n=this._width,s=this._height,o=n*(1-this.anchor.x),a=n*-this.anchor.x,h=s*(1-this.anchor.y),l=s*-this.anchor.y,u=this.worldTransform,c=u.a,d=u.b,p=u.c,f=u.d,g=u.tx,v=u.ty,m=c*a+p*l+g,y=f*l+d*a+v,x=c*o+p*l+g,b=f*l+d*o+v,T=c*o+p*h+g,_=f*h+d*o+v,w=c*a+p*h+g,E=f*h+d*a+v;t=m,t=t>x?x:t,t=t>T?T:t,t=t>w?w:t,r=y,r=r>b?b:r,r=r>_?_:r,r=r>E?E:r,e=m,e=x>e?x:e,e=T>e?T:e,e=w>e?w:e,i=y,i=b>i?b:i,i=_>i?_:i,i=E>i?E:i;var S=this._bounds;return S.x=t,S.width=e-t,S.y=r,S.height=i-r,this._currentBounds=S,S},r.prototype.onTextureUpdate=function(){},r.prototype.generateTilingTexture=function(t){if(this.texture.baseTexture.hasLoaded){var e,r,n=this.originalTexture||this.texture,s=n.frame,o=s.width!==n.baseTexture.width||s.height!==n.baseTexture.height,a=!1;if(t?(e=i.utils.getNextPowerOfTwo(s.width),r=i.utils.getNextPowerOfTwo(s.height),(s.width!==e||s.height!==r||n.baseTexture.width!==e||n.baseTexture.height||r)&&(a=!0)):o&&(e=s.width,r=s.height,a=!0),a){var h;this.tilingTexture&&this.tilingTexture.isTiling?(h=this.tilingTexture.canvasBuffer,h.resize(e,r),this.tilingTexture.baseTexture.width=e,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(h=new i.CanvasBuffer(e,r),this.tilingTexture=i.Texture.fromCanvas(h.canvas),this.tilingTexture.canvasBuffer=h,this.tilingTexture.isTiling=!0),h.context.drawImage(n.baseTexture.source,n.crop.x,n.crop.y,n.crop.width,n.crop.height,0,0,e,r),this.tileScaleOffset.x=s.width/e,this.tileScaleOffset.y=s.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=n;this._refreshTexture=!1,this.originalTexture=this.texture,this.texture=this.tilingTexture,this.tilingTexture.baseTexture._powerOf2=!0}},r.prototype.destroy=function(){i.Sprite.prototype.destroy.call(this),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture.destroy(!0),this.tilingTexture=null,this._uvs=null}},{"../core":20,"../core/textures/TextureUvs":61}],73:[function(t,e){e.exports={MovieClip:t("./MovieClip"),Rope:t("./Rope"),Strip:t("./Strip"),StripShader:t("./StripShader"),TilingSprite:t("./TilingSprite")}},{"./MovieClip":68,"./Rope":69,"./Strip":70,"./StripShader":71,"./TilingSprite":72}],74:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":20}],75:[function(t,e){function r(){i.AbstractFilter.call(this),this.blurXFilter=new n,this.blurYFilter=new s,this.defaultFilter=new i.AbstractFilter}var i=t("../../core"),n=t("../blur/BlurXFilter"),s=t("../blur/BlurYFilter");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,r){var n=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,r),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(i.CONST.blendModes.SCREEN),this.blurYFilter.applyFilter(t,n,r),t.blendModeManager.setBlendMode(i.CONST.blendModes.NORMAL),t.filterManager.returnRenderTarget(n)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":20,"../blur/BlurXFilter":77,"../blur/BlurYFilter":78}],76:[function(t,e){function r(){i.AbstractFilter.call(this),this.blurXFilter=new n,this.blurYFilter=new s}var i=t("../../core"),n=t("./BlurXFilter"),s=t("./BlurYFilter");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,r){var i=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,i),this.blurYFilter.applyFilter(t,i,r),t.filterManager.returnRenderTarget(i)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":20,"./BlurXFilter":77,"./BlurYFilter":78}],77:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float blur;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;\n\n    gl_FragColor = sum;\n}\n",{blur:{type:"1f",value:1/512}})
}var i=t("../../core"),n=1/7e3;r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value/n},set:function(t){this.uniforms.blur.value=n*t}}})},{"../../core":20}],78:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float blur;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;\n    sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;\n\n    gl_FragColor = sum;\n}\n",{blur:{type:"1f",value:1/512}})}var i=t("../../core"),n=1/7e3;r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value/n},set:function(t){this.uniforms.blur.value=n*t}}})},{"../../core":20}],79:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nconst vec2 delta = vec2(1.0/10.0, 0.0);\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n")}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r},{"../../core":20}],80:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform mat4 matrix;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;\n}\n",{matrix:{type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=t}}})},{"../../core":20}],81:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":20}],82:[function(t,e){function r(t,e,r){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"2v",value:{x:1/e,y:1/r}}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":20}],83:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r},{"../../core":20}],84:[function(t,e){function r(t){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\nuniform vec2 scale;\nuniform vec2 offset;\nuniform vec4 dimensions;\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n// const vec2 textureDimensions = vec2(750.0, 750.0);\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord;\n    mapCords += (dimensions.zw + offset)/ dimensions.xy ;\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    vec2 matSample = texture2D(displacementMap, mapCords).xy;\n    matSample -= 0.5;\n    matSample *= scale;\n    matSample /= mapDimensions;\n\n    gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));\n\n    // TODO: Is this needed?\n    // gl_FragColor.rgb = mix(gl_FragColor.rgb, gl_FragColor.rgb, 1.0);\n}\n",{displacementMap:{type:"sampler2D",value:t},scale:{type:"v2",value:{x:30,y:30}},offset:{type:"v2",value:{x:0,y:0}},mapDimensions:{type:"v2",value:{x:1,y:5112}},dimensions:{type:"4fv",value:[0,0,0,0]}}),t.baseTexture._powerOf2=!0,t.baseTexture.hasLoaded?this.onTextureLoaded():t.baseTexture.once("loaded",this.onTextureLoaded.bind(this))}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}},scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../core":20}],85:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":20}],86:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":20}],87:[function(t,e){e.exports={AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),NormalMapFilter:t("./normal/NormalMapFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"./ascii/AsciiFilter":74,"./bloom/BloomFilter":75,"./blur/BlurFilter":76,"./blur/BlurXFilter":77,"./blur/BlurYFilter":78,"./blur/SmartBlurFilter":79,"./color/ColorMatrixFilter":80,"./color/ColorStepFilter":81,"./convolution/ConvolutionFilter":82,"./crosshatch/CrossHatchFilter":83,"./displacement/DisplacementFilter":84,"./dot/DotScreenFilter":85,"./gray/GrayFilter":86,"./invert/InvertFilter":88,"./noise/NoiseFilter":89,"./normal/NormalMapFilter":90,"./pixelate/PixelateFilter":91,"./rgb/RGBSplitFilter":92,"./sepia/SepiaFilter":93,"./shockwave/ShockwaveFilter":94,"./tiltshift/TiltShiftFilter":95,"./tiltshift/TiltShiftXFilter":96,"./tiltshift/TiltShiftYFilter":97,"./twist/TwistFilter":98}],88:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":20}],89:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":20}],90:[function(t,e){function r(t){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying float vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{displacementMap:{type:"sampler2D",value:t},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}}),t.baseTexture._powerOf2=!0,t.baseTexture.hasLoaded?this.onTextureLoaded():t.baseTexture.once("loaded",this.onTextureLoaded.bind(this))}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height},Object.defineProperties(r.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(t){this.uniforms.displacementMap.value=t}},scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../core":20}],91:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":20}],92:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":20}],93:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":20}],94:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":20}],95:[function(t,e){function r(){i.AbstractFilter.call(this),this.tiltShiftXFilter=new n,this.tiltShiftYFilter=new s}var i=t("../../core"),n=t("./TiltShiftXFilter"),s=t("./TiltShiftYFilter");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.applyFilter=function(t,e,r){var i=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,i),this.tiltShiftYFilter.applyFilter(t,i,r),t.filterManager.returnRenderTarget(i)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":20,"./TiltShiftXFilter":96,"./TiltShiftYFilter":97}],96:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/r,this.uniforms.delta.value.y=e/r},Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":20}],97:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,r=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/r,this.uniforms.delta.value.y=t/r},Object.defineProperties(r.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":20}],98:[function(t,e){function r(){i.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var i=t("../../core");r.prototype=Object.create(i.AbstractFilter.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":20}],99:[function(t,e){function r(){this.global=new i.math.Point,this.target=null,this.originalEvent=null}var i=t("../core");r.prototype.constructor=r,e.exports=r,r.prototype.getLocalPosition=function(t,e){var r=t.worldTransform,n=this.global,s=r.a,o=r.c,a=r.tx,h=r.b,l=r.d,u=r.ty,c=1/(s*l+o*-h);return e=e||new i.math.Point,e.x=l*c*n.x+-o*c*n.y+(u*o-a*l)*c,e.y=s*c*n.y+-h*c*n.x+(-u*s+a*h)*c,e}},{"../core":20}],100:[function(t,e){function r(t){this.stage=t,this.mouse=new n,this.touches={},this.tempPoint=new i.math.Point,this.mouseoverEnabled=!0,this.pool=[],this.interactiveItems=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.mouseOut=!1,this.resolution=1,this._tempPoint=new i.math.Point}var i=t("../core"),n=t("./InteractionData"),s=30,o=!0;r.prototype.constructor=r,e.exports=r,r.prototype.collectInteractiveSprite=function(t,e){for(var r=t.children,i=r.length,n=i-1;n>=0;n--){var s=r[n];s._interactive?(e.interactiveChildren=!0,this.interactiveItems.push(s),s.children.length>0&&this.collectInteractiveSprite(s,s)):(s.__iParent=null,s.children.length>0&&this.collectInteractiveSprite(s,e))}},r.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},r.prototype.addEvents=function(){this.interactionDOMElement&&(window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),this.interactionDOMElement.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},r.prototype.removeEvents=function(){this.interactionDOMElement&&(window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),this.interactionDOMElement.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)
},r.prototype.update=function(){if(this.interactionDOMElement){var t=Date.now(),e=t-this.last;if(e=e*s/1e3,!(1>e)){this.last=t;var r=0;this.dirty&&this.rebuildInteractiveGraph();var i=this.interactiveItems.length,n="inherit",o=!1;for(r=0;i>r;r++){var a=this.interactiveItems[r];a.__hit=this.hitTest(a,this.mouse),this.mouse.target=a,a.__hit&&!o?(a.buttonMode&&(n=a.defaultCursor),a.interactiveChildren||(o=!0),a.__isOver||(a.mouseover&&a.mouseover(this.mouse),a.__isOver=!0)):a.__isOver&&(a.mouseout&&a.mouseout(this.mouse),a.__isOver=!1)}this.currentCursorStyle!==n&&(this.currentCursorStyle=n,this.interactionDOMElement.style.cursor=n)}}},r.prototype.rebuildInteractiveGraph=function(){this.dirty=!1;for(var t=this.interactiveItems.length,e=0;t>e;e++)this.interactiveItems[e].interactiveChildren=!1;this.interactiveItems.length=0,this.stage.interactive&&this.interactiveItems.push(this.stage),this.collectInteractiveSprite(this.stage,this.stage)},r.prototype.onMouseMove=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactionDOMElement.getBoundingClientRect();this.mouse.global.x=(t.clientX-e.left)*(this.interactionDOMElement.width/e.width)/this.resolution,this.mouse.global.y=(t.clientY-e.top)*(this.interactionDOMElement.height/e.height)/this.resolution;for(var r=this.interactiveItems.length,i=0;r>i;i++){var n=this.interactiveItems[i];n.mousemove&&n.mousemove(this.mouse)}},r.prototype.onMouseDown=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t,o&&this.mouse.originalEvent.preventDefault();for(var e=this.interactiveItems.length,r=this.mouse.originalEvent,i=2===r.button||3===r.which,n=i?"rightdown":"mousedown",s=i?"rightclick":"click",a=i?"__rightIsDown":"__mouseIsDown",h=i?"__isRightDown":"__isDown",l=0;e>l;l++){var u=this.interactiveItems[l];if((u[n]||u[s])&&(u[a]=!0,u.__hit=this.hitTest(u,this.mouse),u.__hit&&(u[n]&&u[n](this.mouse),u[h]=!0,!u.interactiveChildren)))break}},r.prototype.onMouseOut=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;var e=this.interactiveItems.length;this.interactionDOMElement.style.cursor="inherit";for(var r=0;e>r;r++){var i=this.interactiveItems[r];i.__isOver&&(this.mouse.target=i,i.mouseout&&i.mouseout(this.mouse),i.__isOver=!1)}this.mouseOut=!0,this.mouse.global.x=-1e4,this.mouse.global.y=-1e4},r.prototype.onMouseUp=function(t){this.dirty&&this.rebuildInteractiveGraph(),this.mouse.originalEvent=t;for(var e=this.interactiveItems.length,r=!1,i=this.mouse.originalEvent,n=2===i.button||3===i.which,s=n?"rightup":"mouseup",o=n?"rightclick":"click",a=n?"rightupoutside":"mouseupoutside",h=n?"__isRightDown":"__isDown",l=0;e>l;l++){var u=this.interactiveItems[l];(u[o]||u[s]||u[a])&&(u.__hit=this.hitTest(u,this.mouse),u.__hit&&!r?(u[s]&&u[s](this.mouse),u[h]&&u[o]&&u[o](this.mouse),u.interactiveChildren||(r=!0)):u[h]&&u[a]&&u[a](this.mouse),u[h]=!1)}},r.prototype.hitTest=function(t,e){var r=e.global;if(!t.worldVisible)return!1;t.worldTransform.applyInverse(r,this._tempPoint);var n,s=this._tempPoint.x,o=this._tempPoint.y;if(e.target=t,t.hitArea&&t.hitArea.contains)return t.hitArea.contains(s,o);if(t instanceof i.Sprite){var a,h=t.texture.frame.width,l=t.texture.frame.height,u=-h*t.anchor.x;if(s>u&&u+h>s&&(a=-l*t.anchor.y,o>a&&a+l>o))return!0}else if(t instanceof i.Graphics){var c=t.graphicsData;for(n=0;n<c.length;n++){var d=c[n];if(d.fill&&d.shape&&d.shape.contains(s,o))return!0}}var p=t.children.length;for(n=0;p>n;n++){var f=t.children[n],g=this.hitTest(f,e);if(g)return e.target=t,!0}return!1},r.prototype.onTouchMove=function(t){this.dirty&&this.rebuildInteractiveGraph();var e,r=this.interactionDOMElement.getBoundingClientRect(),i=t.changedTouches,n=0;for(n=0;n<i.length;n++){var s=i[n];e=this.touches[s.identifier],e.originalEvent=t,e.global.x=(s.clientX-r.left)*(this.interactionDOMElement.width/r.width)/this.resolution,e.global.y=(s.clientY-r.top)*(this.interactionDOMElement.height/r.height)/this.resolution,!navigator.isCocoonJS||r.left||r.top||t.target.style.width||t.target.style.height||(e.global.x=s.clientX,e.global.y=s.clientY);for(var o=0;o<this.interactiveItems.length;o++){var a=this.interactiveItems[o];a.touchmove&&a.__touchData&&a.__touchData[s.identifier]&&a.touchmove(e)}}},r.prototype.onTouchStart=function(t){this.dirty&&this.rebuildInteractiveGraph();var e=this.interactionDOMElement.getBoundingClientRect();o&&t.preventDefault();for(var r=t.changedTouches,i=0;i<r.length;i++){var s=r[i],a=this.pool.pop();a||(a=new n),a.originalEvent=t,this.touches[s.identifier]=a,a.global.x=(s.clientX-e.left)*(this.interactionDOMElement.width/e.width)/this.resolution,a.global.y=(s.clientY-e.top)*(this.interactionDOMElement.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(a.global.x=s.clientX,a.global.y=s.clientY);for(var h=this.interactiveItems.length,l=0;h>l;l++){var u=this.interactiveItems[l];if((u.touchstart||u.tap)&&(u.__hit=this.hitTest(u,a),u.__hit&&(u.touchstart&&u.touchstart(a),u.__isDown=!0,u.__touchData=u.__touchData||{},u.__touchData[s.identifier]=a,!u.interactiveChildren)))break}}},r.prototype.onTouchEnd=function(t){this.dirty&&this.rebuildInteractiveGraph();for(var e=this.interactionDOMElement.getBoundingClientRect(),r=t.changedTouches,i=0;i<r.length;i++){var n=r[i],s=this.touches[n.identifier],o=!1;s.global.x=(n.clientX-e.left)*(this.interactionDOMElement.width/e.width)/this.resolution,s.global.y=(n.clientY-e.top)*(this.interactionDOMElement.height/e.height)/this.resolution,!navigator.isCocoonJS||e.left||e.top||t.target.style.width||t.target.style.height||(s.global.x=n.clientX,s.global.y=n.clientY);for(var a=this.interactiveItems.length,h=0;a>h;h++){var l=this.interactiveItems[h];l.__touchData&&l.__touchData[n.identifier]&&(l.__hit=this.hitTest(l,l.__touchData[n.identifier]),s.originalEvent=t,(l.touchend||l.tap)&&(l.__hit&&!o?(l.touchend&&l.touchend(s),l.__isDown&&l.tap&&l.tap(s),l.interactiveChildren||(o=!0)):l.__isDown&&l.touchendoutside&&l.touchendoutside(s),l.__isDown=!1),l.__touchData[n.identifier]=null)}this.pool.push(s),this.touches[n.identifier]=null}}},{"../core":20,"./InteractionData":99}],101:[function(t,e){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager")}},{"./InteractionData":99,"./InteractionManager":100}],102:[function(t,e){var r=t("resource-loader").Resource,i=t("../core");e.exports=function(){return function(t,e){if(!t.data||navigator.isCocoonJS)if(window.DOMParser){var n=new DOMParser;t.data=n.parseFromString(this.xhr.responseText,"text/xml")}else{var s=document.createElement("div");s.innerHTML=this.xhr.responseText,t.data=s}if(!t.data)return e();var o=this.baseUrl+t.data.getElementsByTagName("page")[0].getAttribute("file"),a={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE};this.loadResource(new r(o,a),function(r){var n={},s=t.data.getElementsByTagName("info")[0],o=t.data.getElementsByTagName("common")[0];n.font=s.getAttribute("face"),n.size=parseInt(s.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10),n.chars={};for(var a=t.data.getElementsByTagName("char"),h=0;h<a.length;h++){var l=parseInt(a[h].getAttribute("id"),10),u=new i.math.Rectangle(parseInt(a[h].getAttribute("x"),10),parseInt(a[h].getAttribute("y"),10),parseInt(a[h].getAttribute("width"),10),parseInt(a[h].getAttribute("height"),10));n.chars[l]={xOffset:parseInt(a[h].getAttribute("xoffset"),10),yOffset:parseInt(a[h].getAttribute("yoffset"),10),xAdvance:parseInt(a[h].getAttribute("xadvance"),10),kerning:{},texture:i.utils.TextureCache[l]=new i.Texture(r.texture.baseTexture,u)}}var c=t.data.getElementsByTagName("kerning");for(h=0;h<c.length;h++){var d=parseInt(c[h].getAttribute("first"),10),p=parseInt(c[h].getAttribute("second"),10),f=parseInt(c[h].getAttribute("amount"),10);n.chars[p].kerning[d]=f}t.bitmapFont=n,e()})}}},{"../core":20,"resource-loader":7}],103:[function(t,e){e.exports={Loader:t("resource-loader"),loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spineAtlasParser:t("./spineAtlasParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser")}},{"./bitmapFontParser":102,"./loader":104,"./spineAtlasParser":105,"./spritesheetParser":106,"./textureParser":107,"resource-loader":7}],104:[function(t,e){var r=t("resource-loader"),i=t("./textureParser"),n=t("./spritesheetParser"),s=t("./spineAtlasParser"),o=t("./bitmapFontParser"),a=new r;a.use(r.middleware.parsing.json()).use(r.middleware.parsing.json()).use(i()).use(n()).use(s()).use(o()),e.exports=a},{"./bitmapFontParser":102,"./spineAtlasParser":105,"./spritesheetParser":106,"./textureParser":107,"resource-loader":7}],105:[function(t,e){var r=t("resource-loader").Resource,i=t("async"),n=t("../spine");e.exports=function(){return function(t,e){if(t.data&&t.data.bones){var s=t.url.substr(0,t.url.lastIndexOf("."))+".atlas",o={crossOrigin:t.crossOrigin,xhrType:r.XHR_RESPONSE_TYPE.TEXT};this.loadResource(new r(s,o),function(r){var s=new n.Atlas(this.ajaxRequest.responseText,this.baseUrl,r.crossOrigin),o=new n.SkeletonJsonParser(new n.AtlasAttachmentParser(s)),a=o.readSkeletonData(t.data);t.spine=a,t.spineAtlas=s,i.each(s.pages,function(t,e){t.rendererObject.hasLoaded?e():t.rendererObject.once("loaded",e)},e)})}else e()}}},{"../spine":110,async:2,"resource-loader":7}],106:[function(t,e){var r=t("resource-loader").Resource,i=t("../core");e.exports=function(){return function(t,e){if(t.data&&t.data.frames){var n={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE};this.loadResource(new r(this.baseUrl+t.data.meta.image,n),function(r){t.textures={};var n=t.data.frames;for(var s in n){var o=n[s].frame;if(o){var a=new i.math.Rectangle(o.x,o.y,o.w,o.h),h=null;n[s].trimmed&&(h=new i.math.Rectangle(n[s].spriteSourceSize.x,n[s].spriteSourceSize.y,n[s].sourceSize.w,n[s].sourceSize.h)),t.textures[s]=new i.Texture(r.texture.baseTexture,a,a.clone(),h)}}e()})}else e()}}},{"../core":20,"resource-loader":7}],107:[function(t,e){var r=t("../core");e.exports=function(){return function(t,e){t.data&&t.data.nodeName&&"img"===t.data.nodeName.toLowerCase()&&(t.texture=new r.Texture(new r.BaseTexture(t.data))),e()}}},{"../core":20}],108:[function(t,e){function r(t){if(i.Container.call(this),!t)throw new Error("The spineData param is required.");this.spineData=t,this.skeleton=new n.Skeleton(t),this.skeleton.updateWorldTransform(),this.stateData=new n.AnimationStateData(t),this.state=new n.AnimationState(this.stateData),this.slotContainers=[];for(var e=0,r=this.skeleton.drawOrder.length;r>e;e++){var s=this.skeleton.drawOrder[e],o=s.attachment,a=new i.Container;if(this.slotContainers.push(a),this.addChild(a),o instanceof n.RegionAttachment){var h=o.rendererObject.name,l=this.createSprite(s,o);s.currentSprite=l,s.currentSpriteName=h,a.addChild(l)}else{if(!(o instanceof n.MeshAttachment))continue;var u=this.createMesh(s,o);s.currentMesh=u,s.currentMeshName=o.name,a.addChild(u)}}this.autoUpdate=!0}var i=t("../core"),n=t("./SpineRuntime");n.Bone.yDown=!0,r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{autoUpdate:{get:function(){return this.updateTransform===r.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?r.prototype.autoUpdateTransform:i.Container.prototype.updateTransform}}}),r.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var e=this.skeleton.drawOrder,r=0,s=e.length;s>r;r++){var o=e[r],a=o.attachment,h=this.slotContainers[r];if(a){var l=a.type;if(l===n.AttachmentType.region){if(a.rendererObject&&(!o.currentSpriteName||o.currentSpriteName!==a.rendererObject.name)){var u=a.rendererObject.name;if(void 0!==o.currentSprite&&(o.currentSprite.visible=!1),o.sprites=o.sprites||{},void 0!==o.sprites[u])o.sprites[u].visible=!0;else{var c=this.createSprite(o,a);h.addChild(c)}o.currentSprite=o.sprites[u],o.currentSpriteName=u}var d=o.bone;h.position.x=d.worldX+a.x*d.m00+a.y*d.m01,h.position.y=d.worldY+a.x*d.m10+a.y*d.m11,h.scale.x=d.worldScaleX,h.scale.y=d.worldScaleY,h.rotation=-(o.bone.worldRotation*n.degRad),o.currentSprite.tint=i.utils.rgb2hex([o.r,o.g,o.b])}else{if(l!==n.AttachmentType.skinnedmesh){h.visible=!1;continue}if(!o.currentMeshName||o.currentMeshName!==a.name){var p=a.name;if(void 0!==o.currentMesh&&(o.currentMesh.visible=!1),o.meshes=o.meshes||{},void 0!==o.meshes[p])o.meshes[p].visible=!0;else{var f=this.createMesh(o,a);h.addChild(f)}o.currentMesh=o.meshes[p],o.currentMeshName=p}a.computeWorldVertices(o.bone.skeleton.x,o.bone.skeleton.y,o,o.currentMesh.vertices)}h.visible=!0,h.alpha=o.a}else h.visible=!1}},r.prototype.autoUpdateTransform=function(){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t),i.Container.prototype.updateTransform.call(this)},r.prototype.createSprite=function(t,e){var r=e.rendererObject,s=r.page.rendererObject,o=new i.math.Rectangle(r.x,r.y,r.rotate?r.height:r.width,r.rotate?r.width:r.height),a=new i.Texture(s,o),h=new i.Sprite(a),l=r.rotate?.5*Math.PI:0;return h.scale.set(r.width/r.originalWidth,r.height/r.originalHeight),h.rotation=l-e.rotation*n.degRad,h.anchor.x=h.anchor.y=.5,t.sprites=t.sprites||{},t.sprites[r.name]=h,h},r.prototype.createMesh=function(t,e){var r=e.rendererObject,n=r.page.rendererObject,s=new i.Texture(n),o=new i.Strip(s);return o.drawMode=i.Strip.DrawModes.TRIANGLES,o.canvasPadding=1.5,o.vertices=new Float32Array(e.uvs.length),o.uvs=e.uvs,o.indices=e.triangles,t.meshes=t.meshes||{},t.meshes[e.name]=o,o}},{"../core":20,"./SpineRuntime":109}],109:[function(t,e){var r=t("../core"),i=e.exports={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array};i.BoneData=function(t,e){this.name=t,this.parent=e},i.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0,flipX:!1,flipY:!1},i.SlotData=function(t,e){this.name=t,this.boneData=e},i.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,additiveBlending:!1},i.IkConstraintData=function(t){this.name=t,this.bones=[]},i.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},i.Bone=function(t,e,r){this.data=t,this.skeleton=e,this.parent=r,this.setToSetupPose()},i.Bone.yDown=!1,i.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,m00:0,m01:0,worldX:0,m10:0,m11:0,worldY:0,worldRotation:0,worldScaleX:1,worldScaleY:1,worldFlipX:!1,worldFlipY:!1,updateWorldTransform:function(){var t=this.parent;if(t)this.worldX=this.x*t.m00+this.y*t.m01+t.worldX,this.worldY=this.x*t.m10+this.y*t.m11+t.worldY,this.data.inheritScale?(this.worldScaleX=t.worldScaleX*this.scaleX,this.worldScaleY=t.worldScaleY*this.scaleY):(this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY),this.worldRotation=this.data.inheritRotation?t.worldRotation+this.rotationIK:this.rotationIK,this.worldFlipX=t.worldFlipX!=this.flipX,this.worldFlipY=t.worldFlipY!=this.flipY;else{var e=this.skeleton.flipX,r=this.skeleton.flipY;this.worldX=e?-this.x:this.x,this.worldY=r!=i.Bone.yDown?-this.y:this.y,this.worldScaleX=this.scaleX,this.worldScaleY=this.scaleY,this.worldRotation=this.rotationIK,this.worldFlipX=e!=this.flipX,this.worldFlipY=r!=this.flipY}var n=this.worldRotation*i.degRad,s=Math.cos(n),o=Math.sin(n);this.worldFlipX?(this.m00=-s*this.worldScaleX,this.m01=o*this.worldScaleY):(this.m00=s*this.worldScaleX,this.m01=-o*this.worldScaleY),this.worldFlipY!=i.Bone.yDown?(this.m10=-o*this.worldScaleX,this.m11=-s*this.worldScaleY):(this.m10=o*this.worldScaleX,this.m11=s*this.worldScaleY)},setToSetupPose:function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.rotationIK=this.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.flipX=t.flipX,this.flipY=t.flipY},worldToLocal:function(t){var e=t[0]-this.worldX,r=t[1]-this.worldY,n=this.m00,s=this.m10,o=this.m01,a=this.m11;this.worldFlipX!=(this.worldFlipY!=i.Bone.yDown)&&(n=-n,a=-a);var h=1/(n*a-o*s);t[0]=e*n*h-r*o*h,t[1]=r*a*h-e*s*h},localToWorld:function(t){var e=t[0],r=t[1];t[0]=e*this.m00+r*this.m01+this.worldX,t[1]=e*this.m10+r*this.m11+this.worldY}},i.Slot=function(t,e){this.data=t,this.bone=e,this.setToSetupPose()},i.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(t){this.attachment=t,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(t){this._attachmentTime=this.bone.skeleton.time-t},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var t=this.data;this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a;for(var e=this.bone.skeleton.data.slots,r=0,i=e.length;i>r;r++)if(e[r]==t){this.setAttachment(t.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(r,t.attachmentName):null);break}}},i.IkConstraint=function(t,e){this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=[];for(var r=0,i=t.bones.length;i>r;r++)this.bones.push(e.findBone(t.bones[r].name));this.target=e.findBone(t.target.name)},i.IkConstraint.prototype={apply:function(){var t=this.target,e=this.bones;switch(e.length){case 1:i.IkConstraint.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:i.IkConstraint.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}}},i.IkConstraint.apply1=function(t,e,r,n){var s=t.data.inheritRotation&&t.parent?t.parent.worldRotation:0,o=t.rotation,a=Math.atan2(r-t.worldY,e-t.worldX)*i.radDeg-s;t.rotationIK=o+(a-o)*n},i.IkConstraint.apply2=function(t,e,r,n,s,o){var a=e.rotation,h=t.rotation;if(!o)return e.rotationIK=a,void(t.rotationIK=h);var l,u,c=i.temp,d=t.parent;d?(c[0]=r,c[1]=n,d.worldToLocal(c),r=(c[0]-t.x)*d.worldScaleX,n=(c[1]-t.y)*d.worldScaleY):(r-=t.x,n-=t.y),e.parent==t?(l=e.x,u=e.y):(c[0]=e.x,c[1]=e.y,e.parent.localToWorld(c),t.worldToLocal(c),l=c[0],u=c[1]);var p=l*t.worldScaleX,f=u*t.worldScaleY,g=Math.atan2(f,p),v=Math.sqrt(p*p+f*f),m=e.data.length*e.worldScaleX,y=2*v*m;if(1e-4>y)return void(e.rotationIK=a+(Math.atan2(n,r)*i.radDeg-h-a)*o);var x=(r*r+n*n-v*v-m*m)/y;-1>x?x=-1:x>1&&(x=1);var b=Math.acos(x)*s,T=v+m*x,_=m*Math.sin(b),w=Math.atan2(n*T-r*_,r*T+n*_),E=(w-g)*i.radDeg-h;E>180?E-=360:-180>E&&(E+=360),t.rotationIK=h+E*o,E=(b+g)*i.radDeg-a,E>180?E-=360:-180>E&&(E+=360),e.rotationIK=a+(E+t.worldRotation-e.parent.worldRotation)*o},i.Skin=function(t){this.name=t,this.attachments={}},i.Skin.prototype={addAttachment:function(t,e,r){this.attachments[t+":"+e]=r},getAttachment:function(t,e){return this.attachments[t+":"+e]},_attachAll:function(t,e){for(var r in e.attachments){var i=r.indexOf(":"),n=parseInt(r.substring(0,i)),s=r.substring(i+1),o=t.slots[n];if(o.attachment&&o.attachment.name==s){var a=this.getAttachment(n,s);a&&o.setAttachment(a)}}}},i.Animation=function(t,e,r){this.name=t,this.timelines=e,this.duration=r},i.Animation.prototype={apply:function(t,e,r,i,n){i&&0!=this.duration&&(r%=this.duration,e%=this.duration);for(var s=this.timelines,o=0,a=s.length;a>o;o++)s[o].apply(t,e,r,n,1)},mix:function(t,e,r,i,n,s){i&&0!=this.duration&&(r%=this.duration,e%=this.duration);for(var o=this.timelines,a=0,h=o.length;h>a;a++)o[a].apply(t,e,r,n,s)}},i.Animation.binarySearch=function(t,e,r){var i=0,n=Math.floor(t.length/r)-2;if(!n)return r;for(var s=n>>>1;;){if(t[(s+1)*r]<=e?i=s+1:n=s,i==n)return(i+1)*r;s=i+n>>>1}},i.Animation.binarySearch1=function(t,e){var r=0,i=t.length-2;if(!i)return 1;for(var n=i>>>1;;){if(t[n+1]<=e?r=n+1:i=n,r==i)return r+1;n=r+i>>>1}},i.Animation.linearSearch=function(t,e,r){for(var i=0,n=t.length-r;n>=i;i+=r)if(t[i]>e)return i;return-1},i.Curves=function(){this.curves=[]},i.Curves.prototype={setLinear:function(t){this.curves[19*t]=0},setStepped:function(t){this.curves[19*t]=1},setCurve:function(t,e,r,i,n){var s=.1,o=s*s,a=o*s,h=3*s,l=3*o,u=6*o,c=6*a,d=2*-e+i,p=2*-r+n,f=3*(e-i)+1,g=3*(r-n)+1,v=e*h+d*l+f*a,m=r*h+p*l+g*a,y=d*u+f*c,x=p*u+g*c,b=f*c,T=g*c,_=19*t,w=this.curves;w[_++]=2;for(var E=v,S=m,A=_+19-1;A>_;_+=2)w[_]=E,w[_+1]=S,v+=y,m+=x,y+=b,x+=T,E+=v,S+=m},getCurvePercent:function(t,e){e=0>e?0:e>1?1:e;var r=this.curves,i=19*t,n=r[i];if(0===n)return e;if(1==n)return 0;i++;for(var s=0,o=i,a=i+19-1;a>i;i+=2)if(s=r[i],s>=e){var h,l;return i==o?(h=0,l=0):(h=r[i-2],l=r[i-1]),l+(r[i+1]-l)*(e-h)/(s-h)}var u=r[i-1];return u+(1-u)*(e-s)/(1-s)}},i.RotateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r},apply:function(t,e,r,n,s){var o=this.frames;if(!(r<o[0])){var a=t.bones[this.boneIndex];if(r>=o[o.length-2]){for(var h=a.data.rotation+o[o.length-1]-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;return void(a.rotation+=h*s)}var l=i.Animation.binarySearch(o,r,2),u=o[l-1],c=o[l],d=1-(r-c)/(o[l-2]-c);d=this.curves.getCurvePercent(l/2-1,d);for(var h=o[l+1]-u;h>180;)h-=360;for(;-180>h;)h+=360;for(h=a.data.rotation+(u+h*d)-a.rotation;h>180;)h-=360;for(;-180>h;)h+=360;a.rotation+=h*s}}},i.TranslateTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,i){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=i},apply:function(t,e,r,n,s){var o=this.frames;if(!(r<o[0])){var a=t.bones[this.boneIndex];if(r>=o[o.length-3])return a.x+=(a.data.x+o[o.length-2]-a.x)*s,void(a.y+=(a.data.y+o[o.length-1]-a.y)*s);var h=i.Animation.binarySearch(o,r,3),l=o[h-2],u=o[h-1],c=o[h],d=1-(r-c)/(o[h+-3]-c);d=this.curves.getCurvePercent(h/3-1,d),a.x+=(a.data.x+l+(o[h+1]-l)*d-a.x)*s,a.y+=(a.data.y+u+(o[h+2]-u)*d-a.y)*s}}},i.ScaleTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,i){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=i},apply:function(t,e,r,n,s){var o=this.frames;if(!(r<o[0])){var a=t.bones[this.boneIndex];if(r>=o[o.length-3])return a.scaleX+=(a.data.scaleX*o[o.length-2]-a.scaleX)*s,void(a.scaleY+=(a.data.scaleY*o[o.length-1]-a.scaleY)*s);var h=i.Animation.binarySearch(o,r,3),l=o[h-2],u=o[h-1],c=o[h],d=1-(r-c)/(o[h+-3]-c);d=this.curves.getCurvePercent(h/3-1,d),a.scaleX+=(a.data.scaleX*(l+(o[h+1]-l)*d)-a.scaleX)*s,a.scaleY+=(a.data.scaleY*(u+(o[h+2]-u)*d)-a.scaleY)*s}}},i.ColorTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=5*t},i.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(t,e,r,i,n,s){t*=5,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=i,this.frames[t+3]=n,this.frames[t+4]=s},apply:function(t,e,r,n,s){var o=this.frames;if(!(r<o[0])){var a,h,l,u;if(r>=o[o.length-5]){var c=o.length-1;a=o[c-3],h=o[c-2],l=o[c-1],u=o[c]}else{var d=i.Animation.binarySearch(o,r,5),p=o[d-4],f=o[d-3],g=o[d-2],v=o[d-1],m=o[d],y=1-(r-m)/(o[d-5]-m);y=this.curves.getCurvePercent(d/5-1,y),a=p+(o[d+1]-p)*y,h=f+(o[d+2]-f)*y,l=g+(o[d+3]-g)*y,u=v+(o[d+4]-v)*y}var x=t.slots[this.slotIndex];1>s?(x.r+=(a-x.r)*s,x.g+=(h-x.g)*s,x.b+=(l-x.b)*s,x.a+=(u-x.a)*s):(x.r=a,x.g=h,x.b=l,x.a=u)}}},i.AttachmentTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.attachmentNames=[],this.attachmentNames.length=t},i.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.attachmentNames[t]=r},apply:function(t,e,r){var n=this.frames;if(r<n[0])return void(e>r&&this.apply(t,e,Number.MAX_VALUE,null,0));e>r&&(e=-1);var s=r>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,r)-1;if(!(n[s]<e)){var o=this.attachmentNames[s];t.slots[this.slotIndex].setAttachment(o?t.getAttachmentBySlotIndex(this.slotIndex,o):null)}}},i.EventTimeline=function(t){this.frames=[],this.frames.length=t,this.events=[],this.events.length=t},i.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.events[t]=r},apply:function(t,e,r,n,s){if(n){var o=this.frames,a=o.length;if(e>r)this.apply(t,e,Number.MAX_VALUE,n,s),e=-1;else if(e>=o[a-1])return;if(!(r<o[0])){var h;if(e<o[0])h=0;else{h=i.Animation.binarySearch1(o,e);for(var l=o[h];h>0&&o[h-1]==l;)h--}for(var u=this.events;a>h&&r>=o[h];h++)n.push(u[h])}}}},i.DrawOrderTimeline=function(t){this.frames=[],this.frames.length=t,this.drawOrders=[],this.drawOrders.length=t},i.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.drawOrders[t]=r},apply:function(t,e,r){var n=this.frames;if(!(r<n[0])){var s;s=r>=n[n.length-1]?n.length-1:i.Animation.binarySearch1(n,r)-1;var o=t.drawOrder,a=t.slots,h=this.drawOrders[s];if(h)for(var l=0,u=h.length;u>l;l++)o[l]=t.slots[h[l]];else for(var l=0,u=a.length;u>l;l++)o[l]=a[l]}}},i.FfdTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=t,this.frameVertices=[],this.frameVertices.length=t},i.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(t,e,r){this.frames[t]=e,this.frameVertices[t]=r},apply:function(t,e,r,n,s){var o=t.slots[this.slotIndex];if(o.attachment==this.attachment){var a=this.frames;if(!(r<a[0])){var h=this.frameVertices,l=h[0].length,u=o.attachmentVertices;if(u.length!=l&&(s=1),u.length=l,r>=a[a.length-1]){var c=h[a.length-1];if(1>s)for(var d=0;l>d;d++)u[d]+=(c[d]-u[d])*s;else for(var d=0;l>d;d++)u[d]=c[d]}else{var p=i.Animation.binarySearch1(a,r),f=a[p],g=1-(r-f)/(a[p-1]-f);g=this.curves.getCurvePercent(p-1,0>g?0:g>1?1:g);var v=h[p-1],m=h[p];if(1>s)for(var d=0;l>d;d++){var y=v[d];u[d]+=(y+(m[d]-y)*g-u[d])*s}else for(var d=0;l>d;d++){var y=v[d];u[d]=y+(m[d]-y)*g}}}}}},i.IkConstraintTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=3*t},i.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(t,e,r,i){t*=3,this.frames[t]=e,this.frames[t+1]=r,this.frames[t+2]=i},apply:function(t,e,r,n,s){var o=this.frames;if(!(r<o[0])){var a=t.ikConstraints[this.ikConstraintIndex];if(r>=o[o.length-3])return a.mix+=(o[o.length-2]-a.mix)*s,void(a.bendDirection=o[o.length-1]);var h=i.Animation.binarySearch(o,r,3),l=o[h+-2],u=o[h],c=1-(r-u)/(o[h+-3]-u);c=this.curves.getCurvePercent(h/3-1,c);var d=l+(o[h+1]-l)*c;a.mix+=(d-a.mix)*s,a.bendDirection=o[h+-1]}}},i.FlipXTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.FlipXTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r?1:0},apply:function(t,e,r){var n=this.frames;if(r<n[0])return void(e>r&&this.apply(t,e,Number.MAX_VALUE,null,0));e>r&&(e=-1);var s=(r>=n[n.length-2]?n.length:i.Animation.binarySearch(n,r,2))-2;n[s]<e||(t.bones[boneIndex].flipX=0!=n[s+1])}},i.FlipYTimeline=function(t){this.curves=new i.Curves(t),this.frames=[],this.frames.length=2*t},i.FlipYTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(t,e,r){t*=2,this.frames[t]=e,this.frames[t+1]=r?1:0},apply:function(t,e,r){var n=this.frames;if(r<n[0])return void(e>r&&this.apply(t,e,Number.MAX_VALUE,null,0));e>r&&(e=-1);var s=(r>=n[n.length-2]?n.length:i.Animation.binarySearch(n,r,2))-2;n[s]<e||(t.bones[boneIndex].flipY=0!=n[s+1])}},i.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},i.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(t){for(var e=this.bones,r=0,i=e.length;i>r;r++)if(e[r].name==t)return e[r];return null},findBoneIndex:function(t){for(var e=this.bones,r=0,i=e.length;i>r;r++)if(e[r].name==t)return r;return-1},findSlot:function(t){for(var e=this.slots,r=0,i=e.length;i>r;r++)if(e[r].name==t)return slot[r];return null},findSlotIndex:function(t){for(var e=this.slots,r=0,i=e.length;i>r;r++)if(e[r].name==t)return r;return-1},findSkin:function(t){for(var e=this.skins,r=0,i=e.length;i>r;r++)if(e[r].name==t)return e[r];return null},findEvent:function(t){for(var e=this.events,r=0,i=e.length;i>r;r++)if(e[r].name==t)return e[r];return null},findAnimation:function(t){for(var e=this.animations,r=0,i=e.length;i>r;r++)if(e[r].name==t)return e[r];return null},findIkConstraint:function(t){for(var e=this.ikConstraints,r=0,i=e.length;i>r;r++)if(e[r].name==t)return e[r];return null}},i.Skeleton=function(t){this.data=t,this.bones=[];for(var e=0,r=t.bones.length;r>e;e++){var n=t.bones[e],s=n.parent?this.bones[t.bones.indexOf(n.parent)]:null;this.bones.push(new i.Bone(n,this,s))}this.slots=[],this.drawOrder=[];for(var e=0,r=t.slots.length;r>e;e++){var o=t.slots[e],a=this.bones[t.bones.indexOf(o.boneData)],h=new i.Slot(o,a);this.slots.push(h),this.drawOrder.push(h)}this.ikConstraints=[];for(var e=0,r=t.ikConstraints.length;r>e;e++)this.ikConstraints.push(new i.IkConstraint(t.ikConstraints[e],this));this.boneCache=[],this.updateCache()},i.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var t=this.ikConstraints,e=t.length,r=e+1,i=this.boneCache;i.length>r&&(i.length=r);for(var n=0,s=i.length;s>n;n++)i[n].length=0;for(;i.length<r;)i[i.length]=[];var o=i[0],a=this.bones;t:for(var n=0,s=a.length;s>n;n++){var h=a[n],l=h;do{for(var u=0;e>u;u++)for(var c=t[u],d=c.bones[0],p=c.bones[c.bones.length-1];;){if(l==p){i[u].push(h),i[u+1].push(h);continue t}if(p==d)break;p=p.parent}l=l.parent}while(l);o[o.length]=h}},updateWorldTransform:function(){for(var t=this.bones,e=0,r=t.length;r>e;e++){var i=t[e];i.rotationIK=i.rotation}for(var e=0,n=this.boneCache.length-1;;){for(var s=this.boneCache[e],o=0,a=s.length;a>o;o++)s[o].updateWorldTransform();if(e==n)break;this.ikConstraints[e].apply(),e++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var t=this.bones,e=0,r=t.length;r>e;e++)t[e].setToSetupPose();for(var i=this.ikConstraints,e=0,r=i.length;r>e;e++){var n=i[e];n.bendDirection=n.data.bendDirection,n.mix=n.data.mix}},setSlotsToSetupPose:function(){for(var t=this.slots,e=this.drawOrder,r=0,i=t.length;i>r;r++)e[r]=t[r],t[r].setToSetupPose(r)},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(t){for(var e=this.bones,r=0,i=e.length;i>r;r++)if(e[r].data.name==t)return e[r];return null},findBoneIndex:function(t){for(var e=this.bones,r=0,i=e.length;i>r;r++)if(e[r].data.name==t)return r;return-1},findSlot:function(t){for(var e=this.slots,r=0,i=e.length;i>r;r++)if(e[r].data.name==t)return e[r];return null},findSlotIndex:function(t){for(var e=this.slots,r=0,i=e.length;i>r;r++)if(e[r].data.name==t)return r;return-1},setSkinByName:function(t){var e=this.data.findSkin(t);if(!e)throw"Skin not found: "+t;this.setSkin(e)},setSkin:function(t){if(t)if(this.skin)t._attachAll(this,this.skin);else for(var e=this.slots,r=0,i=e.length;i>r;r++){var n=e[r],s=n.data.attachmentName;if(s){var o=t.getAttachment(r,s);o&&n.setAttachment(o)}}this.skin=t},getAttachmentBySlotName:function(t,e){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t),e)},getAttachmentBySlotIndex:function(t,e){if(this.skin){var r=this.skin.getAttachment(t,e);if(r)return r}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},setAttachment:function(t,e){for(var r=this.slots,i=0,n=r.length;n>i;i++){var s=r[i];if(s.data.name==t){var o=null;if(e&&(o=this.getAttachmentBySlotIndex(i,e),!o))throw"Attachment not found: "+e+", for slot: "+t;return void s.setAttachment(o)
}}throw"Slot not found: "+t},findIkConstraint:function(t){for(var e=this.ikConstraints,r=0,i=e.length;i>r;r++)if(e[r].data.name==t)return e[r];return null},update:function(t){this.time+=t}},i.EventData=function(t){this.name=t},i.EventData.prototype={intValue:0,floatValue:0,stringValue:null},i.Event=function(t){this.data=t},i.Event.prototype={intValue:0,floatValue:0,stringValue:null},i.AttachmentType={region:0,boundingbox:1,mesh:2,skinnedmesh:3},i.RegionAttachment=function(t){this.name=t,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},i.RegionAttachment.prototype={type:i.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(t,e,r,i,n){var s=this.uvs;n?(s[2]=t,s[3]=i,s[4]=t,s[5]=e,s[6]=r,s[7]=e,s[0]=r,s[1]=i):(s[0]=t,s[1]=i,s[2]=t,s[3]=e,s[4]=r,s[5]=e,s[6]=r,s[7]=i)},updateOffset:function(){var t=this.width/this.regionOriginalWidth*this.scaleX,e=this.height/this.regionOriginalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.regionOffsetX*t,n=-this.height/2*this.scaleY+this.regionOffsetY*e,s=r+this.regionWidth*t,o=n+this.regionHeight*e,a=this.rotation*i.degRad,h=Math.cos(a),l=Math.sin(a),u=r*h+this.x,c=r*l,d=n*h+this.y,p=n*l,f=s*h+this.x,g=s*l,v=o*h+this.y,m=o*l,y=this.offset;y[0]=u-p,y[1]=d+c,y[2]=u-m,y[3]=v+c,y[4]=f-m,y[5]=v+g,y[6]=f-p,y[7]=d+g},computeVertices:function(t,e,r,i){t+=r.worldX,e+=r.worldY;var n=r.m00,s=r.m01,o=r.m10,a=r.m11,h=this.offset;i[0]=h[0]*n+h[1]*s+t,i[1]=h[0]*o+h[1]*a+e,i[2]=h[2]*n+h[3]*s+t,i[3]=h[2]*o+h[3]*a+e,i[4]=h[4]*n+h[5]*s+t,i[5]=h[4]*o+h[5]*a+e,i[6]=h[6]*n+h[7]*s+t,i[7]=h[6]*o+h[7]*a+e}},i.MeshAttachment=function(t){this.name=t},i.MeshAttachment.prototype={type:i.AttachmentType.mesh,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new i.Float32Array(r)),this.regionRotate)for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*t,this.uvs[n+1]=this.regionV+e-this.regionUVs[n]*e;else for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*t,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*e},computeWorldVertices:function(t,e,r,i){var n=r.bone;t+=n.worldX,e+=n.worldY;var s=n.m00,o=n.m01,a=n.m10,h=n.m11,l=this.vertices,u=l.length;r.attachmentVertices.length==u&&(l=r.attachmentVertices);for(var c=0;u>c;c+=2){var d=l[c],p=l[c+1];i[c]=d*s+p*o+t,i[c+1]=d*a+p*h+e}}},i.SkinnedMeshAttachment=function(t){this.name=t},i.SkinnedMeshAttachment.prototype={type:i.AttachmentType.skinnedmesh,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var t=this.regionU2-this.regionU,e=this.regionV2-this.regionV,r=this.regionUVs.length;if(this.uvs&&this.uvs.length==r||(this.uvs=new i.Float32Array(r)),this.regionRotate)for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n+1]*t,this.uvs[n+1]=this.regionV+e-this.regionUVs[n]*e;else for(var n=0;r>n;n+=2)this.uvs[n]=this.regionU+this.regionUVs[n]*t,this.uvs[n+1]=this.regionV+this.regionUVs[n+1]*e},computeWorldVertices:function(t,e,r,i){var n,s,o,a,h,l,u,c=r.bone.skeleton.bones,d=this.weights,p=this.bones,f=0,g=0,v=0,m=0,y=p.length;if(r.attachmentVertices.length)for(var x=r.attachmentVertices;y>g;f+=2){for(s=0,o=0,n=p[g++]+g;n>g;g++,v+=3,m+=2)a=c[p[g]],h=d[v]+x[m],l=d[v+1]+x[m+1],u=d[v+2],s+=(h*a.m00+l*a.m01+a.worldX)*u,o+=(h*a.m10+l*a.m11+a.worldY)*u;i[f]=s+t,i[f+1]=o+e}else for(;y>g;f+=2){for(s=0,o=0,n=p[g++]+g;n>g;g++,v+=3)a=c[p[g]],h=d[v],l=d[v+1],u=d[v+2],s+=(h*a.m00+l*a.m01+a.worldX)*u,o+=(h*a.m10+l*a.m11+a.worldY)*u;i[f]=s+t,i[f+1]=o+e}}},i.BoundingBoxAttachment=function(t){this.name=t,this.vertices=[]},i.BoundingBoxAttachment.prototype={type:i.AttachmentType.boundingbox,computeWorldVertices:function(t,e,r,i){t+=r.worldX,e+=r.worldY;for(var n=r.m00,s=r.m01,o=r.m10,a=r.m11,h=this.vertices,l=0,u=h.length;u>l;l+=2){var c=h[l],d=h[l+1];i[l]=c*n+d*s+t,i[l+1]=c*o+d*a+e}}},i.AnimationStateData=function(t){this.skeletonData=t,this.animationToMixTime={}},i.AnimationStateData.prototype={defaultMix:0,setMixByName:function(t,e,r){var i=this.skeletonData.findAnimation(t);if(!i)throw"Animation not found: "+t;var n=this.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;this.setMix(i,n,r)},setMix:function(t,e,r){this.animationToMixTime[t.name+":"+e.name]=r},getMix:function(t,e){var r=t.name+":"+e.name;return this.animationToMixTime.hasOwnProperty(r)?this.animationToMixTime[r]:this.defaultMix}},i.TrackEntry=function(){},i.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},i.AnimationState=function(t){this.data=t,this.tracks=[],this.events=[]},i.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(t){t*=this.timeScale;for(var e=0;e<this.tracks.length;e++){var r=this.tracks[e];if(r){if(r.time+=t*r.timeScale,r.previous){var i=t*r.previous.timeScale;r.previous.time+=i,r.mixTime+=i}var n=r.next;n?(n.time=r.lastTime-n.delay,n.time>=0&&this.setCurrent(e,n)):!r.loop&&r.lastTime>=r.endTime&&this.clearTrack(e)}}},apply:function(t){for(var e=0;e<this.tracks.length;e++){var r=this.tracks[e];if(r){this.events.length=0;var i=r.time,n=r.lastTime,s=r.endTime,o=r.loop;!o&&i>s&&(i=s);var a=r.previous;if(a){var h=a.time;!a.loop&&h>a.endTime&&(h=a.endTime),a.animation.apply(t,h,h,a.loop,null);var l=r.mixTime/r.mixDuration*r.mix;l>=1&&(l=1,r.previous=null),r.animation.mix(t,r.lastTime,i,o,this.events,l)}else 1==r.mix?r.animation.apply(t,r.lastTime,i,o,this.events):r.animation.mix(t,r.lastTime,i,o,this.events,r.mix);for(var u=0,c=this.events.length;c>u;u++){var d=this.events[u];r.onEvent&&r.onEvent(e,d),this.onEvent&&this.onEvent(e,d)}if(o?n%s>i%s:s>n&&i>=s){var p=Math.floor(i/s);r.onComplete&&r.onComplete(e,p),this.onComplete&&this.onComplete(e,p)}r.lastTime=r.time}}},clearTracks:function(){for(var t=0,e=this.tracks.length;e>t;t++)this.clearTrack(t);this.tracks.length=0},clearTrack:function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];e&&(e.onEnd&&e.onEnd(t),this.onEnd&&this.onEnd(t),this.tracks[t]=null)}},_expandToIndex:function(t){if(t<this.tracks.length)return this.tracks[t];for(;t>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(t,e){var r=this._expandToIndex(t);if(r){var i=r.previous;r.previous=null,r.onEnd&&r.onEnd(t),this.onEnd&&this.onEnd(t),e.mixDuration=this.data.getMix(r.animation,e.animation),e.mixDuration>0&&(e.mixTime=0,e.previous=i&&r.mixTime/r.mixDuration<.5?i:r)}this.tracks[t]=e,e.onStart&&e.onStart(t),this.onStart&&this.onStart(t)},setAnimationByName:function(t,e,r){var i=this.data.skeletonData.findAnimation(e);if(!i)throw"Animation not found: "+e;return this.setAnimation(t,i,r)},setAnimation:function(t,e,r){var n=new i.TrackEntry;return n.animation=e,n.loop=r,n.endTime=e.duration,this.setCurrent(t,n),n},addAnimationByName:function(t,e,r,i){var n=this.data.skeletonData.findAnimation(e);if(!n)throw"Animation not found: "+e;return this.addAnimation(t,n,r,i)},addAnimation:function(t,e,r,n){var s=new i.TrackEntry;s.animation=e,s.loop=r,s.endTime=e.duration;var o=this._expandToIndex(t);if(o){for(;o.next;)o=o.next;o.next=s}else this.tracks[t]=s;return 0>=n&&(o?n+=o.endTime-this.data.getMix(o.animation,e):n=0),s.delay=n,s},getCurrent:function(t){return t>=this.tracks.length?null:this.tracks[t]}},i.SkeletonJsonParser=function(t){this.attachmentLoader=t},i.SkeletonJsonParser.prototype={scale:1,readSkeletonData:function(t,e){var r=new i.SkeletonData;r.name=e;var n=t.skeleton;n&&(r.hash=n.hash,r.version=n.spine,r.width=n.width||0,r.height=n.height||0);for(var s=t.bones,o=0,a=s.length;a>o;o++){var h=s[o],l=null;if(h.parent&&(l=r.findBone(h.parent),!l))throw"Parent bone not found: "+h.parent;var u=new i.BoneData(h.name,l);u.length=(h.length||0)*this.scale,u.x=(h.x||0)*this.scale,u.y=(h.y||0)*this.scale,u.rotation=h.rotation||0,u.scaleX=h.hasOwnProperty("scaleX")?h.scaleX:1,u.scaleY=h.hasOwnProperty("scaleY")?h.scaleY:1,u.inheritScale=h.hasOwnProperty("inheritScale")?h.inheritScale:!0,u.inheritRotation=h.hasOwnProperty("inheritRotation")?h.inheritRotation:!0,r.bones.push(u)}var c=t.ik;if(c)for(var o=0,a=c.length;a>o;o++){for(var d=c[o],p=new i.IkConstraintData(d.name),s=d.bones,f=0,g=s.length;g>f;f++){var v=r.findBone(s[f]);if(!v)throw"IK bone not found: "+s[f];p.bones.push(v)}if(p.target=r.findBone(d.target),!p.target)throw"Target bone not found: "+d.target;p.bendDirection=!d.hasOwnProperty("bendPositive")||d.bendPositive?1:-1,p.mix=d.hasOwnProperty("mix")?d.mix:1,r.ikConstraints.push(p)}for(var m=t.slots,o=0,a=m.length;a>o;o++){var y=m[o],u=r.findBone(y.bone);if(!u)throw"Slot bone not found: "+y.bone;var x=new i.SlotData(y.name,u),b=y.color;b&&(x.r=this.toColor(b,0),x.g=this.toColor(b,1),x.b=this.toColor(b,2),x.a=this.toColor(b,3)),x.attachmentName=y.attachment,x.additiveBlending=y.additive&&"true"==y.additive,r.slots.push(x)}var T=t.skins;for(var _ in T)if(T.hasOwnProperty(_)){var w=T[_],E=new i.Skin(_);for(var S in w)if(w.hasOwnProperty(S)){var A=r.findSlotIndex(S),C=w[S];for(var R in C)if(C.hasOwnProperty(R)){var M=this.readAttachment(E,R,C[R]);M&&E.addAttachment(A,R,M)}}r.skins.push(E),"default"==E.name&&(r.defaultSkin=E)}var F=t.events;for(var P in F)if(F.hasOwnProperty(P)){var O=F[P],D=new i.EventData(P);D.intValue=O["int"]||0,D.floatValue=O["float"]||0,D.stringValue=O.string||null,r.events.push(D)}var B=t.animations;for(var L in B)B.hasOwnProperty(L)&&this.readAnimation(L,B[L],r);return r},readAttachment:function(t,e,r){e=r.name||e;var n=i.AttachmentType[r.type||"region"],s=r.path||e,o=this.scale;if(n==i.AttachmentType.region){var a=this.attachmentLoader.newRegionAttachment(t,e,s);if(!a)return null;a.path=s,a.x=(r.x||0)*o,a.y=(r.y||0)*o,a.scaleX=r.hasOwnProperty("scaleX")?r.scaleX:1,a.scaleY=r.hasOwnProperty("scaleY")?r.scaleY:1,a.rotation=r.rotation||0,a.width=(r.width||0)*o,a.height=(r.height||0)*o;var h=r.color;return h&&(a.r=this.toColor(h,0),a.g=this.toColor(h,1),a.b=this.toColor(h,2),a.a=this.toColor(h,3)),a.updateOffset(),a}if(n==i.AttachmentType.mesh){var l=this.attachmentLoader.newMeshAttachment(t,e,s);return l?(l.path=s,l.vertices=this.getFloatArray(r,"vertices",o),l.triangles=this.getIntArray(r,"triangles"),l.regionUVs=this.getFloatArray(r,"uvs",1),l.updateUVs(),h=r.color,h&&(l.r=this.toColor(h,0),l.g=this.toColor(h,1),l.b=this.toColor(h,2),l.a=this.toColor(h,3)),l.hullLength=2*(r.hull||0),r.edges&&(l.edges=this.getIntArray(r,"edges")),l.width=(r.width||0)*o,l.height=(r.height||0)*o,l):null}if(n==i.AttachmentType.skinnedmesh){var l=this.attachmentLoader.newSkinnedMeshAttachment(t,e,s);if(!l)return null;l.path=s;for(var u=this.getFloatArray(r,"uvs",1),c=this.getFloatArray(r,"vertices",1),d=[],p=[],f=0,g=c.length;g>f;){var v=0|c[f++];p[p.length]=v;for(var m=f+4*v;m>f;)p[p.length]=c[f],d[d.length]=c[f+1]*o,d[d.length]=c[f+2]*o,d[d.length]=c[f+3],f+=4}return l.bones=p,l.weights=d,l.triangles=this.getIntArray(r,"triangles"),l.regionUVs=u,l.updateUVs(),h=r.color,h&&(l.r=this.toColor(h,0),l.g=this.toColor(h,1),l.b=this.toColor(h,2),l.a=this.toColor(h,3)),l.hullLength=2*(r.hull||0),r.edges&&(l.edges=this.getIntArray(r,"edges")),l.width=(r.width||0)*o,l.height=(r.height||0)*o,l}if(n==i.AttachmentType.boundingbox){for(var y=this.attachmentLoader.newBoundingBoxAttachment(t,e),c=r.vertices,f=0,g=c.length;g>f;f++)y.vertices.push(c[f]*o);return y}throw"Unknown attachment type: "+n},readAnimation:function(t,e,r){var n=[],s=0,o=e.slots;for(var a in o)if(o.hasOwnProperty(a)){var h=o[a],l=r.findSlotIndex(a);for(var u in h)if(h.hasOwnProperty(u)){var c=h[u];if("color"==u){var d=new i.ColorTimeline(c.length);d.slotIndex=l;for(var p=0,f=0,g=c.length;g>f;f++){var v=c[f],m=v.color,y=this.toColor(m,0),x=this.toColor(m,1),b=this.toColor(m,2),T=this.toColor(m,3);d.setFrame(p,v.time,y,x,b,T),this.readCurve(d,p,v),p++}n.push(d),s=Math.max(s,d.frames[5*d.getFrameCount()-5])}else{if("attachment"!=u)throw"Invalid timeline type for a slot: "+u+" ("+a+")";var d=new i.AttachmentTimeline(c.length);d.slotIndex=l;for(var p=0,f=0,g=c.length;g>f;f++){var v=c[f];d.setFrame(p++,v.time,v.name)}n.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}}}var _=e.bones;for(var w in _)if(_.hasOwnProperty(w)){var E=r.findBoneIndex(w);if(-1==E)throw"Bone not found: "+w;var S=_[w];for(var u in S)if(S.hasOwnProperty(u)){var c=S[u];if("rotate"==u){var d=new i.RotateTimeline(c.length);d.boneIndex=E;for(var p=0,f=0,g=c.length;g>f;f++){var v=c[f];d.setFrame(p,v.time,v.angle),this.readCurve(d,p,v),p++}n.push(d),s=Math.max(s,d.frames[2*d.getFrameCount()-2])}else if("translate"==u||"scale"==u){var d,A=1;"scale"==u?d=new i.ScaleTimeline(c.length):(d=new i.TranslateTimeline(c.length),A=this.scale),d.boneIndex=E;for(var p=0,f=0,g=c.length;g>f;f++){var v=c[f],C=(v.x||0)*A,R=(v.y||0)*A;d.setFrame(p,v.time,C,R),this.readCurve(d,p,v),p++}n.push(d),s=Math.max(s,d.frames[3*d.getFrameCount()-3])}else{if("flipX"!=u&&"flipY"!=u)throw"Invalid timeline type for a bone: "+u+" ("+w+")";var C="flipX"==u,d=C?new i.FlipXTimeline(c.length):new i.FlipYTimeline(c.length);d.boneIndex=E;for(var M=C?"x":"y",p=0,f=0,g=c.length;g>f;f++){var v=c[f];d.setFrame(p,v.time,v[M]||!1),p++}n.push(d),s=Math.max(s,d.frames[2*d.getFrameCount()-2])}}}var F=e.ik;for(var P in F)if(F.hasOwnProperty(P)){var O=r.findIkConstraint(P),c=F[P],d=new i.IkConstraintTimeline(c.length);d.ikConstraintIndex=r.ikConstraints.indexOf(O);for(var p=0,f=0,g=c.length;g>f;f++){var v=c[f],D=v.hasOwnProperty("mix")?v.mix:1,B=!v.hasOwnProperty("bendPositive")||v.bendPositive?1:-1;d.setFrame(p,v.time,D,B),this.readCurve(d,p,v),p++}n.push(d),s=Math.max(s,d.frames[3*d.frameCount-3])}var L=e.ffd;for(var I in L){var k=r.findSkin(I),h=L[I];for(a in h){var l=r.findSlotIndex(a),U=h[a];for(var N in U){var c=U[N],d=new i.FfdTimeline(c.length),Y=k.getAttachment(l,N);if(!Y)throw"FFD attachment not found: "+N;d.slotIndex=l,d.attachment=Y;var X,j=Y.type==i.AttachmentType.mesh;X=j?Y.vertices.length:Y.weights.length/3*2;for(var p=0,f=0,g=c.length;g>f;f++){var G,v=c[f];if(v.vertices){var z=v.vertices,G=[];G.length=X;var W=v.offset||0,H=z.length;if(1==this.scale)for(var V=0;H>V;V++)G[V+W]=z[V];else for(var V=0;H>V;V++)G[V+W]=z[V]*this.scale;if(j)for(var q=Y.vertices,V=0,H=G.length;H>V;V++)G[V]+=q[V]}else j?G=Y.vertices:(G=[],G.length=X);d.setFrame(p,v.time,G),this.readCurve(d,p,v),p++}n[n.length]=d,s=Math.max(s,d.frames[d.frameCount-1])}}}var K=e.drawOrder;if(K||(K=e.draworder),K){for(var d=new i.DrawOrderTimeline(K.length),Q=r.slots.length,p=0,f=0,g=K.length;g>f;f++){var J=K[f],Z=null;if(J.offsets){Z=[],Z.length=Q;for(var V=Q-1;V>=0;V--)Z[V]=-1;var $=J.offsets,te=[];te.length=Q-$.length;for(var ee=0,re=0,V=0,H=$.length;H>V;V++){var ie=$[V],l=r.findSlotIndex(ie.slot);if(-1==l)throw"Slot not found: "+ie.slot;for(;ee!=l;)te[re++]=ee++;Z[ee+ie.offset]=ee++}for(;Q>ee;)te[re++]=ee++;for(var V=Q-1;V>=0;V--)-1==Z[V]&&(Z[V]=te[--re])}d.setFrame(p++,J.time,Z)}n.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}var ne=e.events;if(ne){for(var d=new i.EventTimeline(ne.length),p=0,f=0,g=ne.length;g>f;f++){var se=ne[f],oe=r.findEvent(se.name);if(!oe)throw"Event not found: "+se.name;var ae=new i.Event(oe);ae.intValue=se.hasOwnProperty("int")?se["int"]:oe.intValue,ae.floatValue=se.hasOwnProperty("float")?se["float"]:oe.floatValue,ae.stringValue=se.hasOwnProperty("string")?se.string:oe.stringValue,d.setFrame(p++,se.time,ae)}n.push(d),s=Math.max(s,d.frames[d.getFrameCount()-1])}r.animations.push(new i.Animation(t,n,s))},readCurve:function(t,e,r){var i=r.curve;i?"stepped"==i?t.curves.setStepped(e):i instanceof Array&&t.curves.setCurve(e,i[0],i[1],i[2],i[3]):t.curves.setLinear(e)},toColor:function(t,e){if(8!=t.length)throw"Color hexidecimal length must be 8, recieved: "+t;return parseInt(t.substring(2*e,2*e+2),16)/255},getFloatArray:function(t,e,r){var n=t[e],s=new i.Float32Array(n.length),o=0,a=n.length;if(1==r)for(;a>o;o++)s[o]=n[o];else for(;a>o;o++)s[o]=n[o]*r;return s},getIntArray:function(t,e){for(var r=t[e],n=new i.Uint16Array(r.length),s=0,o=r.length;o>s;s++)n[s]=0|r[s];return n}},i.Atlas=function(t,e,n){e&&e.indexOf("/")!==e.length&&(e+="/"),this.pages=[],this.regions=[],this.texturesLoading=0;var s=new i.AtlasReader(t),o=[];o.length=4;for(var a=null;;){var h=s.readLine();if(null===h)break;if(h=s.trim(h),h.length)if(a){var l=new i.AtlasRegion;l.name=h,l.page=a,l.rotate="true"==s.readValue(),s.readTuple(o);var u=parseInt(o[0]),c=parseInt(o[1]);s.readTuple(o);var d=parseInt(o[0]),p=parseInt(o[1]);l.u=u/a.width,l.v=c/a.height,l.rotate?(l.u2=(u+p)/a.width,l.v2=(c+d)/a.height):(l.u2=(u+d)/a.width,l.v2=(c+p)/a.height),l.x=u,l.y=c,l.width=Math.abs(d),l.height=Math.abs(p),4==s.readTuple(o)&&(l.splits=[parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3])],4==s.readTuple(o)&&(l.pads=[parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3])],s.readTuple(o))),l.originalWidth=parseInt(o[0]),l.originalHeight=parseInt(o[1]),s.readTuple(o),l.offsetX=parseInt(o[0]),l.offsetY=parseInt(o[1]),l.index=parseInt(s.readValue()),this.regions.push(l)}else{a=new i.AtlasPage,a.name=h,2==s.readTuple(o)&&(a.width=parseInt(o[0]),a.height=parseInt(o[1]),s.readTuple(o)),a.format=i.Atlas.Format[o[0]],s.readTuple(o),a.minFilter=i.Atlas.TextureFilter[o[0]],a.magFilter=i.Atlas.TextureFilter[o[1]];var f=s.readValue();a.uWrap=i.Atlas.TextureWrap.clampToEdge,a.vWrap=i.Atlas.TextureWrap.clampToEdge,"x"==f?a.uWrap=i.Atlas.TextureWrap.repeat:"y"==f?a.vWrap=i.Atlas.TextureWrap.repeat:"xy"==f&&(a.uWrap=a.vWrap=i.Atlas.TextureWrap.repeat),a.rendererObject=r.BaseTexture.fromImage(e+h,n),this.pages.push(a)}else a=null}},i.Atlas.prototype={findRegion:function(t){for(var e=this.regions,r=0,i=e.length;i>r;r++)if(e[r].name==t)return e[r];return null},dispose:function(){for(var t=this.pages,e=0,r=t.length;r>e;e++)t[e].rendererObject.destroy(!0)},updateUVs:function(t){for(var e=this.regions,r=0,i=e.length;i>r;r++){var n=e[r];n.page==t&&(n.u=n.x/t.width,n.v=n.y/t.height,n.rotate?(n.u2=(n.x+n.height)/t.width,n.v2=(n.y+n.width)/t.height):(n.u2=(n.x+n.width)/t.width,n.v2=(n.y+n.height)/t.height))}}},i.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},i.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},i.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},i.AtlasPage=function(){},i.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},i.AtlasRegion=function(){},i.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},i.AtlasReader=function(t){this.lines=t.split(/\r\n|\r|\n/)},i.AtlasReader.prototype={index:0,trim:function(t){return t.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw"Invalid line: "+t;return this.trim(t.substring(e+1))},readTuple:function(t){var e=this.readLine(),r=e.indexOf(":");if(-1==r)throw"Invalid line: "+e;for(var i=0,n=r+1;3>i;i++){var s=e.indexOf(",",n);if(-1==s)break;t[i]=this.trim(e.substr(n,s-n)),n=s+1}return t[i]=this.trim(e.substring(n)),i+1}},i.AtlasAttachmentParser=function(t){this.atlas=t},i.AtlasAttachmentParser.prototype={newRegionAttachment:function(t,e,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (region attachment: "+e+")";var s=new i.RegionAttachment(e);return s.rendererObject=n,s.setUVs(n.u,n.v,n.u2,n.v2,n.rotate),s.regionOffsetX=n.offsetX,s.regionOffsetY=n.offsetY,s.regionWidth=n.width,s.regionHeight=n.height,s.regionOriginalWidth=n.originalWidth,s.regionOriginalHeight=n.originalHeight,s},newMeshAttachment:function(t,e,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (mesh attachment: "+e+")";var s=new i.MeshAttachment(e);return s.rendererObject=n,s.regionU=n.u,s.regionV=n.v,s.regionU2=n.u2,s.regionV2=n.v2,s.regionRotate=n.rotate,s.regionOffsetX=n.offsetX,s.regionOffsetY=n.offsetY,s.regionWidth=n.width,s.regionHeight=n.height,s.regionOriginalWidth=n.originalWidth,s.regionOriginalHeight=n.originalHeight,s},newSkinnedMeshAttachment:function(t,e,r){var n=this.atlas.findRegion(r);if(!n)throw"Region not found in atlas: "+r+" (skinned mesh attachment: "+e+")";var s=new i.SkinnedMeshAttachment(e);return s.rendererObject=n,s.regionU=n.u,s.regionV=n.v,s.regionU2=n.u2,s.regionV2=n.v2,s.regionRotate=n.rotate,s.regionOffsetX=n.offsetX,s.regionOffsetY=n.offsetY,s.regionWidth=n.width,s.regionHeight=n.height,s.regionOriginalWidth=n.originalWidth,s.regionOriginalHeight=n.originalHeight,s},newBoundingBoxAttachment:function(t,e){return new i.BoundingBoxAttachment(e)}},i.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},i.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(t,e){var r=t.slots,n=r.length,s=t.x,o=t.y,a=this.boundingBoxes,h=this.polygonPool,l=this.polygons;a.length=0;for(var u=0,c=l.length;c>u;u++)h.push(l[u]);l.length=0;for(var u=0;n>u;u++){var d=r[u],p=d.attachment;if(p.type==i.AttachmentType.boundingbox){a.push(p);var f,g=h.length;g>0?(f=h[g-1],h.splice(g-1,1)):f=[],l.push(f),f.length=p.vertices.length,p.computeWorldVertices(s,o,d.bone,f)}}e&&this.aabbCompute()},aabbCompute:function(){for(var t=this.polygons,e=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MIN_VALUE,s=0,o=t.length;o>s;s++)for(var a=t[s],h=0,l=a.length;l>h;h+=2){var u=a[h],c=a[h+1];e=Math.min(e,u),r=Math.min(r,c),i=Math.max(i,u),n=Math.max(n,c)}this.minX=e,this.minY=r,this.maxX=i,this.maxY=n},aabbContainsPoint:function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},aabbIntersectsSegment:function(t,e,r,i){var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(n>=t&&n>=r||s>=e&&s>=i||t>=o&&r>=o||e>=a&&i>=a)return!1;var h=(i-e)/(r-t),l=h*(n-t)+e;if(l>s&&a>l)return!0;if(l=h*(o-t)+e,l>s&&a>l)return!0;var u=(s-e)/h+t;return u>n&&o>u?!0:(u=(a-e)/h+t,u>n&&o>u?!0:!1)},aabbIntersectsSkeleton:function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},containsPoint:function(t,e){for(var r=this.polygons,i=0,n=r.length;n>i;i++)if(this.polygonContainsPoint(r[i],t,e))return this.boundingBoxes[i];return null},intersectsSegment:function(t,e,r,i){for(var n=this.polygons,s=0,o=n.length;o>s;s++)if(n[s].intersectsSegment(t,e,r,i))return this.boundingBoxes[s];return null},polygonContainsPoint:function(t,e,r){for(var i=t.length,n=i-2,s=!1,o=0;i>o;o+=2){var a=t[o+1],h=t[n+1];if(r>a&&h>=r||r>h&&a>=r){var l=t[o];l+(r-a)/(h-a)*(t[n]-l)<e&&(s=!s)}n=o}return s},polygonIntersectsSegment:function(t,e,r,i,n){for(var s=t.length,o=e-i,a=r-n,h=e*n-r*i,l=t[s-2],u=t[s-1],c=0;s>c;c+=2){var d=t[c],p=t[c+1],f=l*p-u*d,g=l-d,v=u-p,m=o*v-a*g,y=(h*g-o*f)/m;if((y>=l&&d>=y||y>=d&&l>=y)&&(y>=e&&i>=y||y>=i&&e>=y)){var x=(h*v-a*f)/m;if((x>=u&&p>=x||x>=p&&u>=x)&&(x>=r&&n>=x||x>=n&&r>=x))return!0}l=d,u=p}return!1},getPolygon:function(t){var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}}},{"../core":20}],110:[function(t,e){e.exports={Spine:t("./Spine"),runtime:t("./SpineRuntime")}},{"./Spine":108,"./SpineRuntime":109}],111:[function(t,e){function r(t,e){i.Container.call(this),this.textWidth=0,this.textHeight=0,this._pool=[],this._style={tint:e.tint,align:e.align,fontName:null,fontSize:0},this.font=e.font,this._text=t,this.dirty=!1,this.updateText()}var i=t("../core");r.prototype=Object.create(i.Container.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{tint:{get:function(){return this._style.tint},set:function(t){this._style.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._style.align},set:function(t){this._style.align=t,this.dirty=!0}},font:{get:function(){return this._style.font},set:function(t){t=t.split(" "),this._style.fontName=t[t.length-1],this._style.fontSize=t.length>=2?parseInt(t[t.length-2],10):r.fonts[this.fontName].size,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){this._text=t,this.dirty=!0}}}),r.prototype.updateText=function(){for(var t=r.fonts[this.fontName],e=new i.math.Point,n=null,s=[],o=0,a=0,h=[],l=0,u=this.fontSize/t.size,c=0;c<this.text.length;c++){var d=this.text.charCodeAt(c);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(c)))h.push(o),a=Math.max(a,o),l++,e.x=0,e.y+=t.lineHeight,n=null;else{var p=t.chars[d];p&&(n&&p.kerning[n]&&(e.x+=p.kerning[n]),s.push({texture:p.texture,line:l,charCode:d,position:new i.math.Point(e.x+p.xOffset,e.y+p.yOffset)}),o=e.x+(p.texture.width+p.xOffset),e.x+=p.xAdvance,n=d)}}h.push(o),a=Math.max(a,o);var f=[];for(c=0;l>=c;c++){var g=0;"right"===this.style.align?g=a-h[c]:"center"===this.style.align&&(g=(a-h[c])/2),f.push(g)}var v=this.children.length,m=s.length,y=this.tint;for(c=0;m>c;c++){var x=v>c?this.children[c]:this._pool.pop();x?x.setTexture(s[c].texture):x=new i.Sprite(s[c].texture),x.position.x=(s[c].position.x+f[s[c].line])*u,x.position.y=s[c].position.y*u,x.scale.x=x.scale.y=u,x.tint=y,x.parent||this.addChild(x)}for(;this.children.length>m;){var b=this.getChildAt(this.children.length-1);this._pool.push(b),this.removeChild(b)}this.textWidth=a*u,this.textHeight=(e.y+t.lineHeight)*u},r.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),this.containerUpdateTransform()},r.fonts={}},{"../core":20}],112:[function(t,e){function r(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,i.Sprite.call(this,i.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)}var i=t("../core");r.prototype=Object.create(i.Sprite.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}},height:{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}}),r.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},r.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},r.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),r=[],i=0,n=this.determineFontProperties(this.style.font),s=0;s<e.length;s++){var o=this.context.measureText(e[s]).width;r[s]=o,i=Math.max(i,o)}var a=i+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var h=n.fontSize+this.style.strokeThickness,l=h*e.length;this.style.dropShadow&&(l+=this.style.dropShadowDistance),this.canvas.height=l*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic";var u,c;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(s=0;s<e.length;s++)u=this.style.strokeThickness/2,c=this.style.strokeThickness/2+s*h+n.ascent,"right"===this.style.align?u+=i-r[s]:"center"===this.style.align&&(u+=(i-r[s])/2),this.style.fill&&this.context.fillText(e[s],u+d,c+p)}for(this.context.fillStyle=this.style.fill,s=0;s<e.length;s++)u=this.style.strokeThickness/2,c=this.style.strokeThickness/2+s*h+n.ascent,"right"===this.style.align?u+=i-r[s]:"center"===this.style.align&&(u+=(i-r[s])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[s],u,c),this.style.fill&&this.context.fillText(e[s],u,c);this.updateTexture()},r.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height},r.prototype.renderWebGL=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),i.Sprite.prototype.renderWebGL.call(this,t)},r.prototype.renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),i.Sprite.prototype.renderCanvas.call(this,t)},r.prototype.determineFontProperties=function(t){var e=r.fontPropertiesCache[t];if(!e){e={};var i=r.fontPropertiesCanvas,n=r.fontPropertiesContext;n.font=t;var s=Math.ceil(n.measureText("|Mq").width),o=Math.ceil(n.measureText("M").width),a=2*o;o=1.4*o|0,i.width=s,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,o);var h,l,u=n.getImageData(0,0,s,a).data,c=u.length,d=4*s,p=0,f=!1;for(h=0;o>h;h++){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p+=d}for(e.ascent=o-h,p=c-d,f=!1,h=a;h>o;h--){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p-=d}e.descent=h-o,e.descent+=6,e.fontSize=e.ascent+e.descent,r.fontPropertiesCache[t]=e}return e},r.prototype.wordWrap=function(t){for(var e="",r=t.split("\n"),i=0;i<r.length;i++){for(var n=this.style.wordWrapWidth,s=r[i].split(" "),o=0;o<s.length;o++){var a=this.context.measureText(s[o]).width,h=a+this.context.measureText(" ").width;0===o||h>n?(o>0&&(e+="\n"),e+=s[o],n=this.style.wordWrapWidth-a):(n-=h,e+=" "+s[o])}i<r.length-1&&(e+="\n")}return e},r.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),i.Sprite.prototype.getBounds.call(this,t)},r.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t?!0:t)},r.fontPropertiesCache={},r.fontPropertiesCanvas=document.createElement("canvas"),r.fontPropertiesContext=r.fontPropertiesCanvas.getContext("2d")},{"../core":20}],113:[function(t,e){e.exports={Text:t("./Text"),BitmapText:t("./BitmapText")}},{"./BitmapText":111,"./Text":112}]},{},[1])(1)});